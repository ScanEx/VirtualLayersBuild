{"version":3,"sources":["webpack:///webpack/bootstrap 633c8287256926438150","webpack:///./entry.js","webpack:///./external/GMXClusterLayer/dist/clusterLayer.js","webpack:///./external/FireVirtualLayer/dist/fireVirtualLayer.js","webpack:///./external/GMXPluginGFW/dist/gmxPluginGfw.js","webpack:///./external/GMXPluginGFW/dist/gmxPluginGfw.css","webpack:///./external/leaflet-GIBS/src/GIBSLayer.js","webpack:///./external/leaflet-GIBS/src/GIBSMetadata.js","webpack:///./external/leaflet-GIBS/src/GeoMixerGIBSLayer.js"],"names":["require","RotatedMarker","L","Marker","extend","options","angle","statics","TRANSFORM_ORIGIN","DomUtil","testProp","_initIcon","prototype","call","_icon","style","_getTransformOrigin","iconAnchor","icon","_setPos","pos","TRANSFORM","Browser","ie","rad","Math","PI","costheta","cos","sintheta","sin","filter","setAngle","ang","rotatedMarker","pick","obj","keys","Object","k","indexOf","reduce","prev","curr","o","bool","v","ClusterLayer","Class","includes","Mixin","Events","dataLayer","dataLayerId","openPopupOnClick","openPopupOnHover","undefined","initialize","setOptions","_markerClusterGroup","markerClusterGroup","_updateBbox","_styleManager","gmx","currentZoom","_map","getZoom","screenBounds","getBounds","p1","getNorthWest","p2","getSouthEast","bbox","gmxUtil","bounds","lng","lat","_observer","setBounds","onAdd","map","_getDataLayer","then","_dataLayer","_gmx","styleManager","initStyles","on","_bindDataProvider","catch","err","console","error","addLayer","_onMapZoomend","_bindPopupEvents","onRemove","dl","_unbindDataProvider","removeLayer","off","setDateInterval","dateBegin","dateEnd","_dateInterval","apply","openPopup","itemId","originalEvent","layer","item","dataManager","getItem","itemGeo","properties","length","latlng","Projection","Mercator","unproject","x","coordinates","y","parsedProperties","getItemProperties","popup","createPopup","_popup","once","_popupMode","setLatLng","openOn","propertiesHash","id","propertiesArr","balloonData","getItemBalloon","DisableBalloonOnClick","getItemStyle","protoOffset","Popup","offset","sx","sy","setContent","parseBalloonTemplate","templateBalloon","tileAttributeTypes","unitOptions","geometries","le","hl","hasLayer","minZoom","maxZoom","_pGetDataLayer","Promise","resolve","reject","dataLayerRef","arRes","split","loadLayer","addObserver","type","filters","dateInterval","callback","_onObserverData","bind","removeObserver","data","markers","added","parsedStyleKeys","itemGeoJson","itemStyle","iconUrl","createIconMarker","marker","clearLayers","addLayers","fire","rotate","createIconMarkerIcon","image","getSVGIcon","_closePopup","_popupOnClustersMarkerMouseover","_popupOnClustersMarkerMouseout","_popupOnClustersAnimationEnd","ev","_popupOnClustersMarkerClick","mcg","nsGmx","window","module","exports","_polygon","assert","_vector","_EF","$p","$v","SpatialQuery","polygonsorientation","Array","fragmenttype","boundaryfragment","resultsorientation","edge_list","insertE","fragment","reg","i","splice","push","deleteE","popnextE","point","result","searchE","organizeE","attribs","dims","vector","z","init_union_tables","ORIENTATION_SAME","ORIENTATION_OPPOSITE","T_VERTEX_INSIDE","T_VERTEX_OUTSIDE","DIRECTION_NONE","DIRECTION_FORWARD","DIRECTION_BOTH","bound_minX","Number","MAX_VALUE","bound_maxX","bound_minY","bound_maxY","head","tail","direciton","holes","TYPE_ISLAND","count","polygon","p","direction","add_point","T_VERTEX_BOUNDARY","compute_direction","DIRECTION_INVALID","minXNode","foreach","node","next","DIRECTION_CLOCKWISE","DIRECTION_COUNTERCLOCKWISE","reverse_direction","start","current","tmp","union","otherPoly","boolean_operation","OPERATION_UNION","e","log","A","B","Oper","Reg","orientationA","orientationB","edgeFragments","nInside","point_inside_2d","noIntersections","a_start","a_end","node2","b_start","b_end","seg1","seg2","intersection","pointOfIntersectionForLineSegments","Point","vtx","insert_vertex_after","Type","end","seg","m","res","Type2","Out","outHoles","outPolygons","fNext","edgeLoop","cEdge","resultPolygon","startPoint","iLoopEdge","dy1","dy2","slope1","slope2","pt","add_vtx","fn","after","nxt","to_wkt","a","str","iHole","b","to_point_array_2d","wn","isBoundary","v_x","v_y","numberInRange","n","min","max","seg_a","seg_b","ua","ub","pointOfIntersectionForLineSegmentsDiag","start_a","end_a","start_b","end_b","denom","numer_a","numer_b","TYPE_HOLE","DIRECTION_OPPOSITE","OPERATION_INTERSECTION","OPERATION_DIFFERENCE","OPERATION_REV_DIFFERENCE","Translations","addText","FireVirtualLayer","ModisPixelDimensions","buildModisPixelDimensionsTable","h","EARTH_RADIUS","SAMPLES","r","s","sample","theta","cos_theta","temp","pow","sqrt_temp","sqrt","DS","DT","_hq","getDistant","cpt","bl","Vy","Vx","findMostDistantPointFromBaseLine","baseLine","points","maxD","maxPt","newPoints","idx","d","buildConvexHull","convexHullBaseLines","t","maxPoint","concat","getConvexHull","maxX","minX","minPt","ch","MultiPolygonUnion","multiPolygon","matrixMultiPolygon","unitedMultiPolygon","nStartPolygons","currentPolygon","pop","iOther","unionResults","poly","getPixelMultiPolygon","results","merc","project","X1","Y1","X2","Y2","newLatLng","newLat","newLon","mdelta","distVincenty","h_scale","v_scale","h_dx","h_dy","v_dx","v_dy","frontX","frontY","backX","backY","corner1x","corner1y","corner2x","corner2y","corner3x","corner3y","corner4x","corner4y","mercBbox","latlngBbox","mercMin","mercMax","fromMercBbox","getExtendedBbox","mercOld","newBbox","extendBbox","mercNew","oldSquare","newSquare","contains","simpleheat","canvas","_canvas","document","getElementById","_ctx","getContext","_width","width","_height","height","_max","_data","defaultRadius","defaultGradient","add","clear","radius","blur","_radius","_blur","_r","minRadius","_minRadius","_circle","circle","createElement","ctx","r2","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","closePath","fill","gradient","grad","createLinearGradient","addColorStop","fillStyle","fillRect","_grad","getImageData","draw","minOpacity","clearRect","len","globalAlpha","rr","drawImage","colored","_colorize","putImageData","pixels","j","HeatLayer","Layer","latlngs","_latlngs","setLatLngs","redraw","addLatLng","_heat","_updateOptions","_frame","_animating","Util","requestAnimFrame","_redraw","_initCanvas","_panes","overlayPane","appendChild","_reset","zoomAnimation","any3d","_animateZoom","getPanes","removeChild","addTo","create","size","getSize","animated","addClass","topLeft","containerPointToLayerPoint","setPosition","LatLngBounds","containerPointToLatLng","getMaxZoom","cellSize","grid","panePos","_getMapPanePos","offsetX","offsetY","cell","len2","latLngToContainerPoint","floor","alt","round","scale","getZoomScale","zoom","_getCenterOffset","center","_multiplyBy","subtract","setTransform","getTranslateString","minClustersZoom","minGeomZoom","minHotspotZoom","hostName","_clustersLayer","createLayer","title","attributes","styles","Filter","Balloon","getText","MinZoom","MaxZoom","RenderStyle","radialGradient","r1","label","color","field","align","_clustersGeomLayer","outline","thickness","opacity","HoverStyle","_heatmapLayer","setZIndex","_this","event","html","getContent","zoomLink","$","click","closePopup","setView","div","append","_layerIsVisible","_lazyLoadDataLayers","_updateLayersVisibility","_hotspotLayer","_dateBegin","_dateEnd","_rawClusterLayer","_observerClusters","_observerHotspots","_observerHeatmap","observersBbox","extendedBbox","_loadLayersPromise","heatmapLayerID","hotspotLayerID","loadLayers","mapID","layerID","dailyLayerID","rawHotspotLayer","rawClustersLayer","setStyles","getStyles","rawHeatmapLayer","_createHeatmapObserverCallback","active","_updateClustersByObject","srcLayer","heatLayer","pointsBuffer","weightFieldsHash","addData","removeData","it","find","parser","props","fi","factor","w","removed","estimeteGeometry","clusterAttr","countAttr","fromLayer","indexes","tileAttributeIndexes","dateAttr","getGmxProperties","TemporalColumnName","idAttr","identityField","parseItem","getPropertiesHash","geometry","clusters","objects","clustersToRepaint","onExtent","mult","clusterId","hotspotId","spots","startDate","POSITIVE_INFINITY","endDate","NEGATIVE_INFINITY","isIndustrial","cluster","coords","hotspotDate","FireType","clustersToAdd","itemIDsToRemove","strStartDate","dateToString","strEndDate","newItem","String","tmpPolygon","timestamp","date","Date","lz","getUTCDate","getUTCMonth","getUTCFullYear","isVisible","toggleActive","FireVirtualFactory","initFromDescription","layerDescription","meta","MetaProperties","Value","z_index","addLayerClass","GFW_ATTRIBUTION","GFWLayer","TileLayer","Canvas","async","attribution","_yearBegin","_yearEnd","_drawLayer","img","imgData","exp","pixelPos","yearLoss","intensity","drawTile","tilePoint","Image","crossOrigin","onload","tileDrawn","src","setYearInterval","yearBegin","yearEnd","GFWLayerWithSlider","_layer","_slider","GFWSlider","position","addControl","removeControl","arguments","getSlider","Control","_setYears","template","Handlebars","compile","labels","year","ui","_ui","slider","values","range","change","dragging","DomEvent","disable","enable","saveState","version","loadState","defineClass","GeoMixerGFWLayer","_gmxProperties","gmxCore","addModule","layerClass","init","path","loadCSS","when","loadScript","publicInterface","pluginName","loadModule","s2","num","gibsAttribution","getGibsURL","info","emptyImageUrl","dateStr","Time","TileMatrixSet","TileMatrix","TileRow","TileCol","GIBSLayerImage","gibsID","_layerInfo","GIBS_LAYERS","_date","getTileUrl","setDate","newDate","isTemporal","GIBSLayerCanvas","layerName","_maskInfo","GIBS_MASKS","setTransparent","isTransparent","transparent","_loadImage","url","onLoaded","onError","onerror","hasMask","mainImg","maskImg","tryToProcess","mainCtx","mainData","maskCanvas","maskCtx","maskPixels","_adjustTilePoint","mainSrc","maskSrc","GIBSLayer","layerInfo","needMask","test","GIBSProxyLayer","DummyLayer","shift","valueOf"],"mappings":"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","file":"virtual-layers.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 633c8287256926438150","require('./external/GMXClusterLayer')\r\n\r\nrequire('./external/FireVirtualLayer')\r\n\r\nrequire('./external/GMXPluginGFW/dist/gmxPluginGfw.js')\r\nrequire('./external/GMXPluginGFW/dist/gmxPluginGfw.css')\r\n\r\nrequire('./external/leaflet-GIBS/src/GIBSLayer.js')\r\nrequire('./external/leaflet-GIBS/src/GIBSMetadata.js')\r\nrequire('./external/leaflet-GIBS/src/GeoMixerGIBSLayer.js')\r\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js",";(function() {\r\n\"use strict\";\r\n\r\n// https://github.com/bbecquet/Leaflet.PolylineDecorator/blob/master/src/L.RotatedMarker.js\r\n\r\nconst RotatedMarker = L.Marker.extend({\r\n    options: {\r\n        angle: 0\r\n    },\r\n\r\n    statics: {\r\n        TRANSFORM_ORIGIN: L.DomUtil.testProp(\r\n            ['transformOrigin', 'WebkitTransformOrigin', 'OTransformOrigin', 'MozTransformOrigin', 'msTransformOrigin'])\r\n    },\r\n\r\n    _initIcon: function() {\r\n        L.Marker.prototype._initIcon.call(this);\r\n\r\n        this._icon.style[L.RotatedMarker.TRANSFORM_ORIGIN] = this._getTransformOrigin();\r\n    },\r\n\r\n    _getTransformOrigin: function() {\r\n        var iconAnchor = this.options.icon.options.iconAnchor;\r\n\r\n        if (!iconAnchor) {\r\n            return '50% 50%';\r\n        }\r\n\r\n        return iconAnchor[0] + 'px ' + iconAnchor[1] + 'px';\r\n    },\r\n\r\n    _setPos: function(pos) {\r\n        L.Marker.prototype._setPos.call(this, pos);\r\n\r\n        if (L.DomUtil.TRANSFORM) {\r\n            // use the CSS transform rule if available\r\n            this._icon.style[L.DomUtil.TRANSFORM] += ' rotate(' + this.options.angle + 'deg)';\r\n        } else if (L.Browser.ie) {\r\n            // fallback for IE6, IE7, IE8\r\n            var rad = this.options.angle * (Math.PI / 180),\r\n                costheta = Math.cos(rad),\r\n                sintheta = Math.sin(rad);\r\n            this._icon.style.filter += ' progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\\'auto expand\\', M11=' +\r\n                costheta + ', M12=' + (-sintheta) + ', M21=' + sintheta + ', M22=' + costheta + ')';\r\n        }\r\n    },\r\n\r\n    setAngle: function(ang) {\r\n        this.options.angle = ang;\r\n    }\r\n});\r\n\r\nconst rotatedMarker = function(pos, options) {\r\n    return new L.RotatedMarker(pos, options);\r\n};\r\n\r\nfunction pick(obj, keys) {\r\n    return Object.keys(obj).filter(function(k) {\r\n        return !!(keys.indexOf(k) + 1)\r\n    }).reduce(function(prev, curr) {\r\n        var o = {}\r\n        o[curr] = obj[curr]\r\n        return L.extend(prev, o)\r\n    }, {})\r\n}\r\n\r\nfunction bool(v) {\r\n    if (v === 'false') {\r\n        return false\r\n    }\r\n    return !!v\r\n}\r\n\r\nconst ClusterLayer = L.Class.extend({\r\n    includes: [L.Mixin.Events],\r\n\r\n    options: {\r\n        dataLayer: null,\r\n        dataLayerId: '',\r\n        openPopupOnClick: true,\r\n        openPopupOnHover: undefined\r\n    },\r\n\r\n    // options.minZoom\r\n    // options.maxZoom\r\n    // options.dataLayer\r\n    // options.dataLayerId\r\n    // options.openPopupOnClick\r\n    // options.openPopupOnHover\r\n    // + MarkerClusterGroup options\r\n    initialize: function(options) {\r\n        L.setOptions(this, options)\r\n        this.options.openPopupOnClick = bool(this.options.openPopupOnClick)\r\n        this.options.openPopupOnHover = bool(this.options.openPopupOnHover)\r\n        this._markerClusterGroup = L.markerClusterGroup(pick(this.options, [\r\n            'showCoverageOnHover',\r\n            'zoomToBoundsOnClick',\r\n            'spiderfyOnMaxZoom',\r\n            'removeOutsideVisibleBounds',\r\n            'animate',\r\n            'animateAddingMarkers',\r\n            'disableClusteringAtZoom',\r\n            'maxClusterRadius',\r\n            'polygonOptions',\r\n            'singleMarkerMode',\r\n            'spiderLegPolylineOptions',\r\n            'spiderfyDistanceMultiplier',\r\n            'iconCreateFunction',\r\n            'minZoom',\r\n            'maxZoom'\r\n        ]))\r\n    },\r\n\r\n    _updateBbox: function() {\r\n        this._styleManager.gmx.currentZoom = this._map.getZoom()\r\n        var screenBounds = this._map.getBounds(),\r\n            p1 = screenBounds.getNorthWest(),\r\n            p2 = screenBounds.getSouthEast(),\r\n            bbox = L.gmxUtil.bounds([\r\n                [p1.lng, p1.lat],\r\n                [p2.lng, p2.lat]\r\n            ])\r\n        this._observer && this._observer.setBounds(bbox)\r\n    },\r\n\r\n    onAdd: function(map) {\r\n        this._map = map\r\n\r\n        this._getDataLayer().then((dataLayer) => {\r\n            this._dataLayer = dataLayer\r\n            this._styleManager = this._dataLayer._gmx.styleManager\r\n            return this._styleManager.initStyles()\r\n        }).then(() => {\r\n            map.on('moveend', this._updateBbox, this)\r\n            this._updateBbox()\r\n            this._bindDataProvider()\r\n        }).catch((err) => {\r\n            console.error(err)\r\n        })\r\n\r\n        map.addLayer(this._markerClusterGroup)\r\n        map.on('zoomend', this._onMapZoomend, this)\r\n        this._onMapZoomend()\r\n        this._bindPopupEvents()\r\n    },\r\n\r\n    onRemove: function(map) {\r\n        this._getDataLayer().then((dl) => {\r\n            this._unbindDataProvider()\r\n            map.removeLayer(this._markerClusterGroup)\r\n            map.off('moveend', this._updateBbox, this)\r\n        })\r\n        map.off('zoomend', this._onMapZoomend, this)\r\n    },\r\n\r\n    setDateInterval: function(dateBegin, dateEnd) {\r\n        this._dateInterval = [dateBegin, dateEnd]\r\n        this._observer && this._observer.setDateInterval.apply(this._observer, this._dateInterval)\r\n    },\r\n\r\n    openPopup: function(itemId, originalEvent = null) {\r\n        const layer = this._dataLayer\r\n        const item = this._dataLayer._gmx.dataManager.getItem(itemId)\r\n\r\n        if (!item) { return }\r\n\r\n        const itemGeo = item.properties[item.properties.length - 1]\r\n        const latlng = L.Projection.Mercator.unproject({\r\n            x: itemGeo.coordinates[0],\r\n            y: itemGeo.coordinates[1]\r\n        })\r\n        const parsedProperties = layer.getItemProperties(item.properties)\r\n\r\n        const popup = this.createPopup({ parsedProperties, item, layer, originalEvent })\r\n\r\n        if (!popup) { return }\r\n\r\n        this._popup = popup\r\n\r\n        popup.once('close', () => {\r\n            this._popupMode = ''\r\n            this._popup = null\r\n        })\r\n\r\n        this._popup\r\n            .setLatLng(latlng)\r\n            .openOn(this._map)\r\n    },\r\n\r\n    createPopup: function ({ parsedProperties: propertiesHash, item: { id, properties: propertiesArr }, layer: dataLayer }) {\r\n        const balloonData = dataLayer._gmx.styleManager.getItemBalloon(id)\r\n\r\n        if (balloonData && !balloonData.DisableBalloonOnClick) {\r\n            var style = dataLayer.getItemStyle(id)\r\n            if (style && style.iconAnchor) {\r\n                var protoOffset = L.Popup.prototype.options.offset\r\n                this._popup.options.offset = [-protoOffset[0] - style.iconAnchor[0] + style.sx / 2,\r\n                    protoOffset[1] - style.iconAnchor[1] + style.sy / 2\r\n                ]\r\n            }\r\n\r\n            return L.popup()\r\n                .setContent(L.gmxUtil.parseBalloonTemplate(balloonData.templateBalloon, {\r\n                    properties: propertiesHash,\r\n                    tileAttributeTypes: dataLayer._gmx.tileAttributeTypes,\r\n                    unitOptions: this._map.options || {},\r\n                    geometries: [propertiesArr[propertiesArr.length - 1]]\r\n                }))\r\n        }\r\n    },\r\n\r\n    _onMapZoomend: function (le) {\r\n        const { _map, _markerClusterGroup, options } = this\r\n        const hl = _map.hasLayer(_markerClusterGroup)\r\n        if (typeof options.minZoom === 'string' && _map.getZoom() < options.minZoom / 1) {\r\n            hl && _map.removeLayer(_markerClusterGroup)\r\n        } else if (typeof options.maxZoom === 'string' && _map.getZoom() > options.maxZoom / 1) {\r\n            hl && _map.removeLayer(_markerClusterGroup)\r\n        } else {\r\n            !hl && _map.addLayer(_markerClusterGroup)\r\n        }\r\n    },\r\n\r\n    _getDataLayer: function () {\r\n        if (!this._pGetDataLayer) {\r\n            this._pGetDataLayer = new Promise((resolve, reject) => {\r\n                if (this.options.dataLayer) {\r\n                    return resolve(this.options.dataLayer)\r\n                } else if (this.options.dataLayerRef) {\r\n                    const arRes = this.options.dataLayerRef.split(':')\r\n                    if (arRes.length !== 2) {\r\n                        return reject('invalid dataLayerRef')\r\n                    }\r\n                    return L.gmx.loadLayer(arRes[0], arRes[1]).then(resolve, reject)\r\n                }\r\n                return reject('dataLayer is not specified')\r\n            })\r\n        }\r\n\r\n        return this._pGetDataLayer\r\n    },\r\n\r\n    _bindDataProvider: function() {\r\n        this._observer = this._dataLayer.addObserver({\r\n            type: 'resend',\r\n            filters: ['styleFilter'],\r\n            dateInterval: this._dateInterval,\r\n            callback: this._onObserverData.bind(this)\r\n        })\r\n    },\r\n\r\n    _unbindDataProvider: function() {\r\n        this._dataLayer.removeObserver(this._observer)\r\n        this._observer = null\r\n    },\r\n\r\n    _onObserverData: function(data) {\r\n        const { dataLayer } = this.options\r\n\r\n        // this._vectorTileItemsProperties = {}\r\n        const markers = data.added.map(({ id, properties, item: { parsedStyleKeys } }) => {\r\n            // this._vectorTileItemsProperties[id] = dataLayer.getItemProperties(properties)\r\n            const itemGeoJson = properties[properties.length - 1]\r\n            if (itemGeoJson.type !== 'POINT') {\r\n                return\r\n            }\r\n\r\n            const itemStyle = parsedStyleKeys || dataLayer.getItemStyle(id)\r\n\r\n            const latlng = L.Projection.Mercator.unproject({\r\n                x: itemGeoJson.coordinates[0],\r\n                y: itemGeoJson.coordinates[1]\r\n            })\r\n\r\n            if (itemStyle.iconUrl) {\r\n                return createIconMarker(latlng, itemStyle, { id })\r\n            } else {\r\n                return L.marker(latlng, { id })\r\n            }\r\n        }).filter(item => !!item)\r\n\r\n        this._markerClusterGroup.clearLayers()\r\n        this._markerClusterGroup.addLayers(markers)\r\n\r\n        this.fire('update')\r\n\r\n        function createIconMarker(latlng, itemStyle, options) {\r\n            if (itemStyle.rotate) {\r\n                return rotatedMarker(latlng, L.extend({}, {\r\n                    icon: createIconMarkerIcon(itemStyle),\r\n                    angle: itemStyle.rotate\r\n                }, options))\r\n            } else {\r\n                return L.marker(latlng, L.extend({}, {\r\n                    icon: createIconMarkerIcon(itemStyle)\r\n                }, options))\r\n            }\r\n        }\r\n\r\n        function createIconMarkerIcon(itemStyle) {\r\n            if (itemStyle && itemStyle.iconUrl) {\r\n                var iconAnchor = itemStyle.image ? [itemStyle.sx / 2, itemStyle.sy / 2] : [8, 10]\r\n                return L.icon({\r\n                    iconAnchor: iconAnchor,\r\n                    iconUrl: itemStyle.iconUrl\r\n                })\r\n            } else {\r\n                return L.gmxUtil.getSVGIcon(itemStyle)\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    _closePopup: function() {\r\n        if (!this._popup) {\r\n            return\r\n        }\r\n\r\n        this._map.removeLayer(this._popup)\r\n        this._popup = null\r\n    },\r\n\r\n    _popupOnClustersMarkerMouseover: function ({ layer: marker, latlng, originalEvent }) {\r\n        if (!this.options.openPopupOnHover) {\r\n            return\r\n        }\r\n\r\n        if (!this._popupMode) {\r\n            this._popupMode = 'hover'\r\n            this.openPopup(marker.options.id, originalEvent)\r\n        }\r\n    },\r\n\r\n    _popupOnClustersMarkerMouseout: function (le) {\r\n        if (this._popupMode === 'hover') {\r\n            this._closePopup()\r\n            this._popupMode = ''\r\n        }\r\n    },\r\n\r\n    _popupOnClustersAnimationEnd: function (ev) {\r\n        // const map = this._popup && this._popup._map\r\n        // map && map.removeLayer(this._popup)\r\n    },\r\n\r\n    _popupOnClustersMarkerClick: function ({ layer: marker, latlng, originalEvent }) {\r\n        if (!this.options.openPopupOnClick) {\r\n            return\r\n        }\r\n\r\n        this._popupMode = 'click'\r\n        this.openPopup(marker.options.id, originalEvent)\r\n    },\r\n\r\n    _bindPopupEvents: function () {\r\n        const mcg = this._markerClusterGroup\r\n        mcg.on('animationend', this._popupOnClustersAnimationEnd, this)\r\n        mcg.on('mouseover', this._popupOnClustersMarkerMouseover, this)\r\n        mcg.on('mouseout', this._popupOnClustersMarkerMouseout, this)\r\n        mcg.on('click', this._popupOnClustersMarkerClick, this)\r\n    }\r\n})\r\n\r\nconst nsGmx = window.nsGmx || {}\r\n\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ClusterLayer\r\n} else {\r\n    nsGmx.ClusterLayer = ClusterLayer\r\n}\r\n}());\r\n\n\n\n// WEBPACK FOOTER //\n// ./external/GMXClusterLayer/dist/clusterLayer.js","(function() {\r\n(function(){\r\n\r\n/*\r\n Spatial Query - a JQuery like Javascript library for handling spatial maths\r\n Copyright (c) 2009 Chris Zelenak\r\n Spatial Query is freely distributable under the MIT X11 License - see LICENSE file.\r\n\r\n Chris Z\r\n For work at www.indy.com\r\n Talked about at www.yeti-factory.org\r\n\r\n*/\r\nvar _polygon = function(o) {\r\n  return new _polygon.prototype.assert(o);\r\n}\r\nvar _vector = function(o) {\r\n  return new _vector.prototype.assert(o);\r\n}\r\nvar _EF = function(o) {\r\n  return new _EF.prototype.assert(o);\r\n}\r\n\r\nvar $p = _polygon;\r\nvar $v = _vector;\r\n\r\nwindow.SpatialQuery = {\r\n    $p: $p, \r\n    $v: $v\r\n}\r\n\r\n\r\n// Lookup tables for boolean operations (intersection, union, difference)\r\nvar polygonsorientation = Array();\r\nvar fragmenttype = Array();\r\nvar boundaryfragment = Array();\r\nvar resultsorientation = Array();\r\n\r\n\r\n\r\n_EF.prototype = {\r\n  assert : function() {\r\n    this.edge_list = [];\r\n\treturn this;\r\n  },\r\n  insertE : function(fragment, reg) {\r\n    // Check if the edge is already in the list\r\n\tfor(var i = 0;i < this.edge_list.length;i++) {\r\n\t  if((this.edge_list[i][0][0] == fragment[0][0] && this.edge_list[i][0][1] == fragment[0][1] && this.edge_list[i][1][0] == fragment[1][0] && this.edge_list[i][1][1] == fragment[1][1])){\r\n\t    // If the edge is already in the list, we are done.\r\n\t\treturn;\r\n\t  \r\n\t  }\r\n\t  \r\n\t  if(this.edge_list[i][0][0] == fragment[1][0] && this.edge_list[i][0][1] == fragment[1][1] && this.edge_list[i][1][0] == fragment[0][0] && this.edge_list[i][1][1] == fragment[0][1]) {\r\n\t\t// If the edge is found in the list, but reversed, remove it from the list and we are done.\r\n\t\tthis.edge_list.splice(i,1);\r\n\t\treturn;\t\t \r\n\t  }\r\n    }\r\n    this.edge_list.push(fragment);\r\n  },\r\n  deleteE : function(fragment) {\r\n    // Check if the edge is already in the list\r\n\tfor(var i = 0;i < this.edge_list.length;i++) {\r\n\t  if((this.edge_list[i][0][0] == fragment[0][0] && this.edge_list[i][0][1] == fragment[0][1] && this.edge_list[i][1][0] == fragment[1][0] && this.edge_list[i][1][1] == fragment[1][1])){\r\n\t    // If the edge is already in the list, delete it\r\n\t\tthis.edge_list.splice(i,1);\r\n\t\treturn;\r\n\t  }\r\n    }\r\n\t// Otherwise there is nothing to remove.\r\n\t//console.log(\"deleteE: no edge to delete.\");\r\n\treturn;\r\n  },\r\n  popnextE : function(point) {\r\n\t// Check if the edge is already in the list\r\n\tfor(var i = 0;i < this.edge_list.length;i++) {\r\n\t\tif(this.edge_list[i][0][0] == point[0] && this.edge_list[i][0][1] == point[1]){\r\n\t\t\tvar result =  this.edge_list[i];\r\n\t\t\tthis.edge_list.splice(i,1);\t\t\t\r\n\t\t\treturn result;\t\t  \r\n\t\t}\r\n\t}\r\n\treturn null;\r\n  },\r\n  searchE : function(fragment) {\r\n    // Check if the edge is already in the list\r\n\tfor(var i = 0;i < this.edge_list.length;i++) {\r\n\t  if((this.edge_list[i][0][0] == fragment[0][0] && this.edge_list[i][0][1] == fragment[0][1] && this.edge_list[i][1][0] == fragment[1][0] && this.edge_list[i][1][1] == fragment[1][1])){\r\n\t    // If the edge in the list, return it's index.\r\n\t\treturn i;\r\n\t  }\r\n    }\r\n\t\r\n\t//console.log(\"searchE: no edge found.\");\r\n\treturn -1;\r\n  },\r\n  organizeE : function() {\r\n    return;\r\n  }\r\n}\r\n\r\n_vector.prototype = {\r\n  assert: function(obj,attribs) {\r\n    this.data = [0, 0, 0];\r\n\tif(obj == undefined || obj == null){\r\n\t  this.dims = 0;\r\n\t  this.data = [];\r\n\t}else if(obj.vector && typeof(obj.vector) == \"function\") {\r\n\t  var v = obj.vector();\r\n\t  this.data = v.data;\r\n\t  this.dims = v.dims;\r\n\t}else if(obj.x || obj.y || obj.z){\r\n\t  this.data[0] = obj.x || 0.0;\r\n\t  this.data[1] = obj.y || 0.0;\r\n\t  this.data[2] = obj.z || 0.0;\r\n\t} else if(obj.length) {\r\n\t  this.data = obj;\r\n\t  this.dims = obj.length;\r\n\t}\r\n\t\r\n\tif(attribs != null && attribs != undefined){\r\n\t  for(var k in attribs) {\r\n\t    this[k] = attribs[k];\r\n\t  }\r\n\t}\r\n\treturn this;\t\r\n  },\r\n  \r\n  x : function(){\r\n    return this.data[0];\r\n  },\r\n  y : function(){\r\n    return this.data[1];\r\n  },\r\n  z : function(){\r\n    return this.data[2];\r\n  },\r\n  vector : function() {\r\n    return this;\r\n  }\r\n}\r\n\r\nfunction init_union_tables() \r\n{\r\n\tif(polygonsorientation.length > 0){\r\n\t\treturn;\r\n\t}\r\n\tpolygonsorientation = [[[ORIENTATION_SAME,ORIENTATION_SAME,ORIENTATION_OPPOSITE,ORIENTATION_OPPOSITE],\r\n\t\t\t\t\t\t\t[ORIENTATION_OPPOSITE,ORIENTATION_OPPOSITE,ORIENTATION_SAME,ORIENTATION_SAME]],\r\n\t\t\t\t\t\t   [[ORIENTATION_OPPOSITE,ORIENTATION_OPPOSITE,ORIENTATION_SAME,ORIENTATION_SAME],\r\n\t\t\t\t\t\t    [ORIENTATION_SAME,ORIENTATION_SAME,ORIENTATION_OPPOSITE,ORIENTATION_OPPOSITE]]\r\n\t\t\t\t\t\t  ];\r\n\r\n\tfragmenttype = [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t [[T_VERTEX_INSIDE,T_VERTEX_INSIDE],[T_VERTEX_OUTSIDE,T_VERTEX_OUTSIDE],[T_VERTEX_OUTSIDE,T_VERTEX_INSIDE],[T_VERTEX_INSIDE,T_VERTEX_OUTSIDE]],\r\n\t\t\t\t\t [[T_VERTEX_OUTSIDE,T_VERTEX_INSIDE],[T_VERTEX_INSIDE,T_VERTEX_OUTSIDE],[T_VERTEX_INSIDE,T_VERTEX_INSIDE],[T_VERTEX_OUTSIDE,T_VERTEX_OUTSIDE]]\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t [[T_VERTEX_INSIDE,T_VERTEX_OUTSIDE],[T_VERTEX_OUTSIDE,T_VERTEX_INSIDE],[T_VERTEX_OUTSIDE,T_VERTEX_OUTSIDE],[T_VERTEX_INSIDE,T_VERTEX_INSIDE]],\r\n\t\t\t\t\t [[T_VERTEX_OUTSIDE,T_VERTEX_OUTSIDE],[T_VERTEX_INSIDE,T_VERTEX_INSIDE],[T_VERTEX_INSIDE,T_VERTEX_OUTSIDE],[T_VERTEX_OUTSIDE,T_VERTEX_INSIDE]]\r\n\t\t\t\t\t]\r\n\t\t\t\t\t];\r\n\t\r\n\tboundaryfragment = [\r\n\t                    [\r\n\t\t\t\t\t\t  [[[DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_NONE],\t\t\t\t[DIRECTION_BOTH,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_NONE]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_FORWARD],\t\t\t\t[DIRECTION_BOTH,DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],      \t\t\t\t[DIRECTION_BOTH,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE]],\r\n\t\t\t\t\t\t  [[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD],\t\t[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],\t\t\t\t\t[DIRECTION_BOTH,DIRECTION_BOTH,DIRECTION_NONE,DIRECTION_NONE]]],\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t [[[DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_FORWARD],\t\t\t\t[DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_BOTH,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_FORWARD],\t\t\t\t[DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_BOTH,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],      \t\t\t\t[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_BOTH,DIRECTION_NONE]],\r\n\t\t\t\t\t\t  [[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD],\t\t[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_BOTH,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],\t\t\t\t\t[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_BOTH,DIRECTION_BOTH]]]\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t [[[DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_NONE],\t\t\t\t[DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_BOTH]],\r\n\t\t\t\t\t\t  [[DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_NONE],\t\t\t\t[DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_BOTH]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],      \t\t\t\t[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_BOTH]],\r\n\t\t\t\t\t\t  [[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD],\t\t[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],\t\t\t\t\t[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_BOTH,DIRECTION_BOTH]]],\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t [[[DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_FORWARD],\t\t\t\t[DIRECTION_FORWARD,DIRECTION_BOTH,DIRECTION_NONE,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_FORWARD,DIRECTION_NONE,DIRECTION_FORWARD,DIRECTION_NONE],\t\t\t\t[DIRECTION_FORWARD,DIRECTION_BOTH,DIRECTION_FORWARD,DIRECTION_NONE]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],      \t\t\t\t[DIRECTION_NONE,DIRECTION_BOTH,DIRECTION_NONE,DIRECTION_NONE]],\r\n\t\t\t\t\t\t  [[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD],\t\t[DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD,DIRECTION_FORWARD]],\r\n\t\t\t\t\t\t  [[DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE,DIRECTION_NONE],\t\t\t\t\t[DIRECTION_BOTH,DIRECTION_BOTH,DIRECTION_NONE,DIRECTION_NONE]]]\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t  ];\r\n\t\r\n\tresultsorientation = [[[1,1,1,-1],\r\n\t                       [1,-1,1,1]],\r\n\t\t\t\t\t\t  [[-1,1,1,1],\r\n\t\t\t\t\t\t   [1,1,-1,1]]\r\n\t\t\t\t\t\t ];\r\n}\r\n\r\n_polygon.prototype = {  \r\n  assert: function(obj,type) {\r\n    init_union_tables();\r\n\tthis.bound_minX = Number.MAX_VALUE;\r\n\tthis.bound_maxX = -Number.MAX_VALUE;\r\n\tthis.bound_minY = Number.MAX_VALUE;\r\n\tthis.bound_maxY = -Number.MAX_VALUE;\r\n\t\r\n    if(obj == undefined || obj == null){\r\n\t   this.head = null;\r\n\t   this.tail = null;\r\n\t   this.direciton = null;\r\n\t   this.holes = [];\r\n\t   if(type == null || type == undefined) {\r\n\t\tthis.type = _polygon.TYPE_ISLAND;\r\n\t   }else{\r\n\t    this.type = type;\r\n\t   }\r\n\t   this.count = 0;\r\n\t} else if (obj.polygon && typeof(obj.polygon) == \"function\") {\r\n\t  var p = obj.polygon();\r\n\t  this.head = p.head;\r\n\t  this.tail = p.tail;\r\n\t  this.direction = p.direction;\r\n\t  this.count = p.count;\r\n\t  this.type = p.type;\r\n\t  this.holes = p.holes;\r\n\t} else if(obj.length) {\r\n\t  this.count = 0;\r\n\t  this.holes = [];\r\n\t  for(var i = 0;i < obj.length; i++) {\r\n\t    this.add_point(obj[i],{type: T_VERTEX_BOUNDARY});\r\n\t  }\r\n\t  this.direction = this.compute_direction();\r\n\t  if(type == null || type == undefined) {\r\n\t\tthis.type = _polygon.TYPE_ISLAND;\r\n\t   }else{\r\n\t    this.type = type;\r\n\t   }\r\n\t}\r\n\treturn this;\r\n  },\r\n  compute_direction : function(){\r\n    if(this.count < 3) {\r\n\t  return _polygon.DIRECTION_INVALID;\r\n\t}\r\n\tvar minXNode = this.head;\r\n\tthis.foreach(function(node) {\r\n\t  if ( node.x < minXNode.x) {\r\n\t    minXNode = node;\r\n\t  }\r\n\t});\r\n\tif (minXNode.next.y > minXNode.prev.y) {\r\n\t  return _polygon.DIRECTION_CLOCKWISE;\r\n\t} else {\r\n\t  return _polygon.DIRECTION_COUNTERCLOCKWISE;\r\n\t}\r\n  },\r\n  reverse_direction : function(){\r\n    var start = this.head;\r\n\tvar current = this.head;\r\n\tvar tmp = null;\r\n\t\r\n\tdo{\r\n\t\ttmp = current.next;\r\n\t\tcurrent.next = current.prev;\r\n\t\tcurrent.prev = tmp;\r\n\t\t// \r\n\t\tcurrent = current.prev; \r\n\t}while(current != start);\r\n\t\r\n\tthis.direction = this.compute_direction();\r\n  },\r\n  union: function(otherPoly) {  \r\n\ttry{\r\n\t\treturn _polygon.prototype.boolean_operation(this, otherPoly, OPERATION_UNION,0);\r\n\t}catch(e){\r\n\t\tconsole.log(e);\r\n\t}\r\n  },\r\n  boolean_operation: function(A,B,Oper,Reg) {\r\n\tvar orientationA = A.direction;\r\n\tvar orientationB = B.direction;\r\n\t\r\n\t// If the operation is union, and bounding boxes dont overlap return right away.\r\n\tif(A.bound_maxX < B.bound_minX || A.bound_minX > B.bound_maxX || \r\n\t   A.bound_maxY < B.bound_minY || A.bound_minY > B.bound_maxY) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// Initialize Edge fragment structure.\r\n\t\r\n\tedgeFragments = _EF();\r\n\t//(function(){\r\n\t// Change polygon orientation according to operation table.\r\n\tif(polygonsorientation[A.type][B.type][Oper] == ORIENTATION_SAME && orientationA != orientationB){\r\n\t\tif(orientationA != orientationB){\r\n\t\t\tB.reverse_direction();\r\n\t\t}\r\n\t}else if(polygonsorientation[A.type][B.type][Oper] == ORIENTATION_OPPOSITE && orientationA == orientationB){\r\n\t\tB.reverse_direction();\r\n\t}\r\n\t\r\n\tvar nInside = 0;\r\n\t\r\n\t// Classify which vertices are inside the other polygon.\r\n\tvar node = A.head;\r\n\tdo { \r\n\t\tnode.type = B.point_inside_2d(node);\r\n\t\tif(node.type != T_VERTEX_OUTSIDE) {\r\n\t\t\tnInside++;\r\n\t\t}\r\n\t\tnode = node.next;\r\n\t} while(node != A.head);\r\n\r\n\tvar node = B.head;\r\n\tdo {\r\n\t\tnode.type = A.point_inside_2d(node);\r\n\t\tif(node.type != T_VERTEX_OUTSIDE) {\r\n\t\t\tnInside++;\r\n\t\t}\r\n\t\tnode = node.next;\r\n\t} while(node != B.head);\r\n\t\r\n\t// If there are no inside or boundary nodes, there is nothing to do, two polygons dont overlap.\r\n\tif(nInside == 0 && Oper == OPERATION_UNION) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// Find intersections\r\n\tvar noIntersections = 1;\r\n\tvar node = A.head;\r\n\tdo {\r\n\t\tvar a_start = node;\r\n\t\tvar a_end = node.next;\t\t\r\n\t\t\r\n\t\tvar node2 = B.head;\r\n\t\tdo {\r\n\t\t\tvar b_start = node2;\r\n\t\t\tvar b_end = node2.next;\r\n\t\t\t\r\n\t\t\tvar seg1 = [[a_start.x,a_start.y],[a_end.x,a_end.y]];\r\n\t\t\tvar seg2 = [[b_start.x,b_start.y],[b_end.x,b_end.y]];\r\n\t\t\tvar intersection = pointOfIntersectionForLineSegments(seg1,seg2);\r\n\t\t\t\r\n\t\t\tif(intersection != null) {\r\n\t\t\t  // Only insert intersection if its not already a vertex.\r\n\t\t\t  // Otherwise just change the vertex type.\r\n\t\t\t  if(intersection[2] == 0){\r\n\t\t\t\ta_start.type = T_VERTEX_BOUNDARY;\r\n\t\t\t  }else if(intersection[2] == 1){\r\n\t\t\t\ta_end.type = T_VERTEX_BOUNDARY;\r\n\t\t\t  }else{\r\n\t\t\t\tvar Point = new _polygon.prototype.vtx(intersection,{type: T_VERTEX_BOUNDARY});\r\n\t\t\t\tA.insert_vertex_after(Point,a_start);\r\n\t\t\t\ta_end = node.next;\t\t\t\t\r\n\t\t\t  }\r\n\t\t\t  \r\n\t\t\t  if(intersection[3] == 0){\r\n\t\t\t\tb_start.type = T_VERTEX_BOUNDARY;\r\n\t\t\t  }else if(intersection[3] == 1){\r\n\t\t\t\tb_end.type = T_VERTEX_BOUNDARY;\r\n\t\t\t  }else{\r\n\t\t\t\tvar Point = new _polygon.prototype.vtx(intersection,{type: T_VERTEX_BOUNDARY});\r\n\t\t\t\tB.insert_vertex_after(Point,b_start);\r\n\t\t\t\tb_end = node2.next;\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t\tnode2 = node2.next;\r\n\t\t} while(node2 != B.head)\r\n\t\t\r\n\t\tnode = node.next;\r\n\t} while(node != A.head);\r\n\t//})();\r\n\t\r\n\t//(function(){\r\n\t// Classify, select and organize edge fragments\r\n\tvar Type = fragmenttype[A.type][B.type][Oper][0];\t\r\n\t\r\n\tvar node = A.head;\r\n\tdo { \r\n\t\tvar start = node;\r\n\t\tvar end = node.next;\t\t\r\n\t\tvar seg = [[start.x,start.y],[end.x,end.y]];\r\n\t\t\r\n\t\tif(start.type == Type || end.type == Type) {\t\t\t\r\n\t\t\tedgeFragments.insertE(seg);\r\n\t\t} else if (start.type == T_VERTEX_BOUNDARY && end.type == T_VERTEX_BOUNDARY) {\r\n\t\t\tvar m = [ (end.x + start.x)/2, (end.y + start.y)/2 ];\r\n\t\t\tvar res = B.point_inside_2d(m);\r\n\t\t\t\r\n\t\t\tif(res == Type || res == T_VERTEX_BOUNDARY){\r\n\t\t\t\tedgeFragments.insertE(seg);\r\n\t\t\t}\r\n\t\t}\r\n\t\tnode = node.next;\r\n\t} while(node != A.head);\r\n\t\r\n\tvar Type2 = fragmenttype[A.type][B.type][Oper][1];\r\n\t\r\n\tvar node = B.head;\r\n\tdo { \r\n\t\tvar start = node;\r\n\t\tvar end = node.next;\t\t\r\n\t\tvar seg = [[start.x,start.y],[end.x,end.y]];\r\n\t\t\r\n\t\tif(start.type == Type2 || end.type == Type2) {\t\t\t\r\n\t\t\tedgeFragments.insertE(seg);\r\n\t\t} else if (start.type == T_VERTEX_BOUNDARY && end.type == T_VERTEX_BOUNDARY) {\r\n\t\t\tvar m = [ (end.x + start.x)/2, (end.y + start.y)/2 ];\r\n\t\t\tvar res = A.point_inside_2d(m);\r\n\t\t\t\r\n\t\t\tif(res == Type2 || res == T_VERTEX_BOUNDARY){\r\n\t\t\t\tedgeFragments.insertE(seg);\r\n\t\t\t}\r\n\t\t}\r\n\t\tnode = node.next;\r\n\t} while(node != B.head);\r\n\t\r\n\t/*\r\n\tfor(iEdge = 0;iEdge < edgeFragments.edge_list.length;iEdge++) {\r\n\t\tseg = edgeFragments.edge_list[iEdge];\r\n\t\trevEdge = [seg[1],seg[0]];\r\n\t\tvar iRevEdge = edgeFragments.searchE(revEdge);\r\n\t\t\r\n\t\t// TODO: Compute situation code\r\n\t\tvar sit = 0;\r\n\t\t\r\n\t\td = boundaryfragment[A.type][B.type][sit][Reg][Oper];\r\n\t\t\r\n\t\tif(d == DIRECTION_NONE) {\r\n\t\t\tedgeFragments.deleteE(seg);\r\n\t\t\tif(iRevEdge >= 0) {\r\n\t\t\t\tedgeFragments.deleteE(revEdge);\r\n\t\t\t}\r\n\t\t\t// TODO Verify this code is correct\r\n\t\t} else if(d == DIRECTION_BOTH){\r\n\t\t\tedgeFragments.delteE(seg);\t\r\n\t\t\t// TOdo investigate what to do here exactly, not quiet clear\r\n\t\t}\r\n\t}\r\n\t*/\r\n\t\r\n\tedgeFragments.organizeE();\r\n\t//})();\r\n\tvar Out = null;\r\n\tvar outHoles = [];\r\n\tvar outPolygons = [];\r\n\t\r\n\t\r\n\t//(function constructResultPolygons(){\r\n\t// Construct the result polygons and find their types.\r\n\twhile(edgeFragments.edge_list.length > 0) {\r\n\t\tvar fNext = edgeFragments.popnextE(edgeFragments.edge_list[0][0]);\r\n\t\t\r\n\t\tvar edgeLoop = [];\r\n\t\t\r\n\t\tdo {\r\n\t\t\tedgeLoop.push(fNext);\r\n\t\t\tfNext = edgeFragments.popnextE(fNext[1]);\r\n\t\t}while(fNext != null);\r\n\t\t\t\t\t\r\n\t\tvar cEdge = edgeLoop[0];\t\t\r\n\t\t\r\n\t\tvar resultPolygon = $p();\r\n\t\tvar startPoint = cEdge[0];\r\n\t\t\r\n\t\tfor(var iLoopEdge = 1;iLoopEdge <= edgeLoop.length;iLoopEdge++) {\r\n\t\t\tvar seg1 = cEdge;\r\n\t\t\t\r\n\t\t\tif(iLoopEdge == edgeLoop.length) {\t\t\t\r\n\t\t\t\t// Add the first point of the edge loop into the result polygon.\r\n\t\t\t\tseg2 = [startPoint,[resultPolygon.head.x,resultPolygon.head.y]];\r\n\t\t\t} else {\r\n\t\t\t\tseg2 = edgeLoop[iLoopEdge];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar dy1 = (seg1[1][1] - seg1[0][1]);\r\n\t\t\tvar dy2 = (seg2[1][1] - seg2[0][1]);\r\n\t\t\t\r\n\t\t\tvar slope1 = Number.MAX_VALUE; // Default to Number.MAX_VALUE, when dividing by 0\t\r\n\t\t\tvar slope2 = Number.MAX_VALUE;\r\n\t\t\t\r\n\t\t\tif(dy1 != 0){\r\n\t\t\t\tslope1 = (seg1[1][0] - seg1[0][0]) / dy1;\r\n\t\t\t}\r\n\t\t\tif(dy2 != 0){\r\n\t\t\t\tslope2 = (seg2[1][0] - seg2[0][0]) / dy2;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Check if the two edges are colinear, if they are join them\r\n\t\t\tif(slope1 == slope2){\r\n\t\t\t\tcEdge = [seg1[0],seg2[1]];\r\n\t\t\t}else{\r\n\t\t\t\t// Otherwise record the edge in to the output structure\r\n\t\t\t\tresultPolygon.add_point(cEdge[1]);\r\n\t\t\t\tcEdge = seg2;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// Figure out the orientation of the current result polygon\r\n\t\tresultPolygon.direction = resultPolygon.compute_direction();\r\n\t\tif(resultPolygon.direction == orientationA) {\r\n\t\t\tif(resultsorientation [A.type][B.type][Oper] == ORIENTATION_SAME){\r\n\t\t\t\tresultPolygon.type = (Number)(A.type);\r\n\t\t\t} else {\r\n\t\t\t\tresultPolygon.type = (Number)(!A.type);\r\n\t\t\t}\r\n\t\t} else if(resultsorientation [A.type][B.type][Oper] == ORIENTATION_SAME) {\r\n\t\t\tresultPolygon.type = (Number)(!A.type);\r\n\t\t} else {\r\n\t\t\tresultPolygon.type = (Number)(A.type);\r\n\t\t}\r\n\t\t\r\n\t\tif(resultPolygon.type == _polygon.TYPE_ISLAND) {\r\n\t\t\toutPolygons.push(resultPolygon);\r\n\t\t} else {\r\n\t\t\toutHoles.push(resultPolygon);\r\n\t\t}\r\n\t}\r\n\t//})();\r\n\t\r\n\tif(outPolygons.length == 1){\r\n\t\tOut = outPolygons[0];\r\n\t\tOut.holes = outHoles;\r\n\t}else{\r\n\t\tconsole.log('Output polygons invalid. Length = '+outPolygons.length);\r\n\t}\r\n\t\r\n\treturn Out;\t\r\n  },\r\n  vtx : function(pt, attribs) {\r\n    this.x = (pt[0]) || 0.0;\r\n\tthis.y = (pt[1]) || 0.0;\r\n\tthis.next = null;\r\n\tthis.prev = null;\r\n\t\r\n\tif(attribs != null && attribs != undefined){\r\n\t  for(var k in attribs) {\r\n\t    this[k] = attribs[k];\r\n\t  }\r\n\t}\r\n\treturn this;  \r\n  },\r\n  add_point : function(point, attribs) {\r\n    var v = new _polygon.prototype.vtx(point, attribs);\r\n\tthis.add_vtx(v);\r\n\treturn this;\r\n  },\r\n  foreach : function(fn){\r\n    var node = this.head;\r\n\tdo { \r\n\t  fn.apply(this, [node]);\r\n\t  node = node.next;\r\n\t} while(node != this.head);\r\n  },\r\n  add_vtx : function(vtx) {\r\n\t// Update polygon bounding box.\r\n\tif(vtx.x < this.bound_minX){\r\n\t\tthis.bound_minX = vtx.x;\r\n\t}\r\n\tif(vtx.x > this.bound_maxX){\r\n\t\tthis.bound_maxX = vtx.x;\r\n\t}\r\n\tif(vtx.y < this.bound_minY){\r\n\t\tthis.bound_minY = vtx.y;\r\n\t}\r\n\tif(vtx.y > this.bound_maxY){\r\n\t\tthis.bound_maxY = vtx.y;\r\n\t}\r\n\t\r\n    if(this.head == null) {\r\n\t  this.head = vtx;\r\n\t  this.tail = vtx;\r\n\t  this.head.prev = this.head;\r\n\t  this.head.next = this.head;\r\n\t  this.count++;\r\n\t} else {\r\n\t  this.insert_vertex_after(vtx, this.tail);\r\n\t}\r\n\treturn this;  \r\n  },\r\n  insert_vertex_after : function(vtx, after) {\r\n    var nxt = after.next;\r\n\tafter.next = vtx;\r\n\tnxt.prev = vtx;\r\n\tvtx.prev = after;\r\n\tvtx.next = nxt;\r\n\tif(this.tail == after) {\r\n\t  this.tail = vtx;\r\n\t}\r\n\tthis.count++;\r\n\treturn this;\r\n  }, \r\n   to_wkt : function(){\r\n\t\r\n    var a = [];\r\n    this.foreach(function(node){\r\n                   a.push([node.x, node.y]);\r\n                 });\r\n\t\t\t\t \r\n\tvar str = \"POLYGON(\";\r\n\t\r\n\tstr += \"(\";\r\n\tfor(var i = 0; i < a.length;i++) {\r\n\t\tstr += a[i][0] + \" \" + a[i][1] + \",\";\r\n\t}\r\n\tstr += a[0][0] + \" \" + a[0][1];\r\n\tstr += \")\";\r\n\t\r\n\tfor(var iHole = 0;iHole < this.holes.length;iHole++) {\r\n\t\tvar b = [];\r\n\t\tthis.holes[iHole].foreach(function(node){\r\n\t\t\t   b.push([node.x, node.y]);\r\n\t\t\t });\r\n\t\tstr += \",(\";\r\n\t\tfor(var i = 0; i < b.length;i++) {\r\n\t\t\tstr += b[i][0] + \" \" + b[i][1] + \",\";\r\n\t\t}\r\n\t\tstr += b[0][0] + \" \" + b[0][1];\r\n\t\tstr += \")\";\t\r\n\t}\r\n\t\r\n\tstr +=\")\";\r\n\t\r\n    return str;\r\n  },\r\n  to_point_array_2d : function(){\r\n    var a = [];\r\n    this.foreach(function(node){\r\n                   a.push([node.x, node.y]);\r\n                 });\r\n    return a;\r\n  }, \r\n  point_inside_2d : function(vtx) {\r\n    var wn = 0;    // the winding number counter\r\n\t\r\n\tvar isBoundary = 0;\r\n\t\r\n\tvar v_x = 0;\r\n\tvar v_y = 0;\r\n\t\r\n\tif(vtx.x){\r\n\t  v_x = vtx.x;\r\n\t  v_y = vtx.y;\r\n\t} else{\r\n\t  v_x = vtx[0];\r\n\t  v_y = vtx[1];\r\n\t}\r\n\t\r\n\tvar seg = [[v_x, v_y],[10000000,v_y]];\r\n\t\r\n    // loop through all edges of the polygon\r\n\tvar node = this.head;\r\n\tdo {\r\n\t    var nxt = node.next;\r\n\t\tvar seg2 = [[node.x,node.y],[nxt.x,nxt.y]];\r\n\t\t\r\n\t\tvar intersection = pointOfIntersectionForLineSegments(seg,seg2);\r\n\t\t\r\n\t\tif(intersection != null) {\r\n\t\t\tif(intersection[2] == 0) {\r\n\t\t\tisBoundary = 1;\r\n\t\t  }\r\n\t\t\t// E[i] crosses upward ala Rule #1\r\n\t\t\tif(seg2[0][1] < seg2[1][1]) {\r\n\t\t\t  // For upwards edge ignore ending point\r\n\t\t\t  if(intersection[3] != 1){\r\n\t\t\t\twn++;\t\t\t  \r\n\t\t\t  }\r\n\t\t\t}else if(seg2[0][1] > seg2[1][1]) {\r\n\t\t\t\t// For downward edge ignore starting point\r\n\t\t\t\tif(intersection[3] != 0){\r\n\t\t\t\twn--;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}else if(seg2[0][1] == v_y && seg2[0][1] == seg2[1][1] && (seg2[0][0] <= v_x || seg2[1][0] <= v_x)){\r\n\t\t\t// Check if the point is on the boundary (between two x coordinates of the edge segment)\r\n\t\t\tif( (v_x >= seg2[0][0] && v_x <= seg2[1][0]) || (v_x >= seg2[1][0] && v_x <= seg2[0][0])){\r\n\t\t\t\tisBoundary = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tnode = nxt;\r\n\t} while(node != this.head);\r\n\t\r\n\t// Handle case if the point is on the boundary of the polygon\r\n\tif(isBoundary) { \r\n\t\treturn T_VERTEX_BOUNDARY;\r\n\t}else{\r\n\t\t// Flip output for \"hole\" polygons.\r\n\t\tif((wn == 0 && this.type == 0) || (wn != 0 && this.type == 1)) {\r\n\t\t\treturn T_VERTEX_OUTSIDE;\r\n\t\t}else{\r\n\t\t\treturn T_VERTEX_INSIDE;\r\n\t\t}\r\n\t}\r\n  }\r\n}\r\n\r\n_vector.numberInRange = function(n, min, max){\r\n  return (n >= min && n <= max);\r\n};\r\n/*\r\n_vector.pointAndTypeOfIntersectionForLineSegments = function{\r\n\tvar intersection = pointOfIntersectionForLineSegments(seg_a, seg_b);\r\n\t\r\n\tif(intersection == null){\r\n\t\treturn T_VERTEX_OUTSIDE;\r\n\t} else {\r\n\t\tvar point = [intersection[0],intersection[1]];\r\n\t\t\r\n\t\tif(intersection[3] == 0 || intersection[3] == 1 || intersection[3] == 0 || intersection[3] == 1) {\r\n\t\t\treturn T_VERTEX_INSIDE;\r\n\t\t} else {\r\n\t\t\treturn T_VERTEX_BOUNDARY;\r\n\t\t}\r\n\t}\r\n}\r\n*/\r\n// segment: [ [x,y], [x2, y2] ]\r\n// algo and original code from:\r\n// http://local.wasp.uwa.edu.au/~pbourke/geometry/lineline2d/\r\nfunction pointOfIntersectionForLineSegments(seg_a, seg_b)\r\n{\t  \r\n  // Assume lines are horizontal or vertical;\r\n  \r\n  // If segment a is vertical\r\n  if(seg_a[0][0] == seg_a[1][0]) {\r\n  \r\n\t// If both vertical, return null\r\n\tif(seg_b[0][0] == seg_b[1][0]) {\r\n\t\treturn null;\r\n\t} else {\r\n\t\t// Make sure the segments intersect.\r\n\t\tif((seg_b[0][1] > seg_a[0][1] && seg_b[0][1] > seg_a[1][1]) || (seg_b[0][1] < seg_a[0][1] && seg_b[0][1] < seg_a[1][1]) ||\r\n\t\t   (seg_a[0][0] > seg_b[0][0] && seg_a[0][0] > seg_b[1][0]) || (seg_a[0][0] < seg_b[0][0] && seg_a[0][0] < seg_b[1][0])){\t\r\n\t\t\treturn null;\r\n\t\t}else{\t\t\t\r\n\t\t\t// Ua should be 0 if first point is on the line, 1 if last point is on the line, and 0.5 otherwise\r\n\t\t\tua = (seg_a[0][1] == seg_b[0][1])? 0 : ((seg_a[1][1] == seg_b[0][1])? 1 : 0.5);\r\n\t\t\tub = (seg_b[0][0] == seg_a[0][0])? 0 : ((seg_b[1][0] == seg_a[0][0])? 1 : 0.5);\r\n\t\t\t\r\n\t\t\treturn [\r\n\t\t\t  seg_a[0][0],\r\n\t\t\t  seg_b[0][1],\r\n\t\t\t  ua,\r\n\t\t\t  ub\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n  } else {\r\n\t// If both horizontal, return null\r\n\tif(seg_b[0][1] == seg_b[1][1]) {\r\n\t\treturn null;\r\n\t} else {\r\n\t\t// Make sure the segments intersect.\r\n\t\tif((seg_b[0][0] > seg_a[0][0] && seg_b[0][0] > seg_a[1][0]) || (seg_b[0][0] < seg_a[0][0] && seg_b[0][0] < seg_a[1][0]) ||\r\n\t\t   (seg_a[0][1] > seg_b[0][1] && seg_a[0][1] > seg_b[1][1]) || (seg_a[0][1] < seg_b[0][1] && seg_a[0][1] < seg_b[1][1])){\r\n\t\t\treturn null;\r\n\t\t} else {\t\t\r\n\t\t\t// Ua should be 0 if first point is on the line, 1 if last point is on the line, and 0.5 otherwise\r\n\t\t\tua = (seg_a[0][0] == seg_b[0][0])? 0 : ((seg_a[1][0] == seg_b[0][0])? 1 : 0.5);\r\n\t\t\tub = (seg_b[0][1] == seg_a[0][1])? 0 : ((seg_b[1][1] == seg_a[0][1])? 1 : 0.5);\r\n\t\t\t\r\n\t\t\treturn [\r\n\t\t\t  seg_b[0][0],\r\n\t\t\t  seg_a[0][1],\r\n\t\t\t  ua,\r\n\t\t\t  ub\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n  }\r\n  return result;\r\n};\r\n_vector.pointOfIntersectionForLineSegmentsDiag = function(seg_a, seg_b){\r\n  var start_a = seg_a[0],  // v1\r\n      end_a = seg_a[1],  // v2\r\n      start_b = seg_b[0], // v3\r\n      end_b = seg_b[1]; // v4\r\n\t  \r\n  var denom = (end_b[1] - start_b[1]) * (end_a[0] - start_a[0]) - (end_b[0] - start_b[0]) * (end_a[1] - start_a[1]);\r\n  if(denom == 0) return null; // parallel\r\n  var numer_a = (end_b[0] - start_b[0]) * (start_a[1] - start_b[1]) - (end_b[1] - start_b[1]) * (start_a[0] - start_b[0]);\r\n  var numer_b = (end_a[0] - start_a[0]) * (start_a[1] - start_b[1]) - (end_a[1] - start_a[1]) * (start_a[0] - start_b[0]);\r\n  if(numer_a == 0 && denom == 0 && numer_a == numer_b) return null; // coincident\r\n  var ua = numer_a / denom,\r\n      ub = numer_b / denom;\r\n  if(_vector.numberInRange(ua, 0.0, 1.0) && _vector.numberInRange(ub, 0.0, 1.0)){\r\n    return [\r\n      start_a[0] + ua * (end_a[0] - start_a[0]),\r\n      start_a[1] + ua * (end_a[1] - start_a[1]),\r\n      ua,\r\n      ub\r\n    ]; // return barycenric coordinates for alpha values in greiner-hormann\r\n  }\r\n  return null; // does not intersect\r\n\r\n};\r\n\r\n_polygon.TYPE_ISLAND = 0;\r\n_polygon.TYPE_HOLE = 1;\r\n\r\n_polygon.DIRECTION_INVALID = 0;\r\n_polygon.DIRECTION_CLOCKWISE = 1;\r\n_polygon.DIRECTION_COUNTERCLOCKWISE = -1;\r\n\r\n_polygon.prototype.assert.prototype = _polygon.prototype;\r\n_vector.prototype.assert.prototype = _vector.prototype;\r\n_EF.prototype.assert.prototype = _EF.prototype;\r\n\r\nvar DIRECTION_NONE = 0,DIRECTION_FORWARD = 1,DIRECTION_OPPOSITE = 2, DIRECTION_BOTH = 3;\r\nvar OPERATION_INTERSECTION = 0,OPERATION_UNION = 1,OPERATION_DIFFERENCE = 2,OPERATION_REV_DIFFERENCE = 3;\r\nvar ORIENTATION_SAME = 1,ORIENTATION_OPPOSITE = -1;\r\n\r\nvar T_VERTEX_OUTSIDE = 0,T_VERTEX_INSIDE = 1,T_VERTEX_BOUNDARY = 2;\r\n\r\n})();\r\nnsGmx.Translations.addText(\"rus\", {\r\n    FireVirtualLayer: {\r\n        \"LayerClusterBalloon\": \"<div style='margin-bottom: 5px;'><b style='color: red;'>Пожар</b></div>\" +\r\n            \"<b>Кол-во термоточек:</b> [count]<br/>\" +\r\n            \"<b>Время наблюдения:</b> [dateRange]<br/>\" +\r\n            \"<div>[SUMMARY]</div>\",\r\n        \"LayerClusterBalloonIndustrial\": \"<span style='margin-bottom: 5px;'><b style='color: red;'>Пожар</b></span> (вероятный техногенный источник <a target='blank' href='http://fires.kosmosnimki.ru/help.html#techno'>?</a>) <br/>\" +\r\n            \"<b>Кол-во термоточек:</b> [count]<br/>\" +\r\n            \"<b>Время наблюдения:</b> [dateRange]<br/>\" +\r\n            \"<div>[SUMMARY]</div>\",\r\n        \"LayerGeometryBalloon\": \"<div style='margin-bottom: 5px;'><b style='color: red;'>Контур пожара</b></div>\" +\r\n            \"<b>Кол-во термоточек:</b> [count]<br/>\" +\r\n            \"<b>Время наблюдения:</b> [dateRange]<br/>\" +\r\n            \"<div>[SUMMARY]</div>\",\r\n        \"zoomInMessage\": \"Приблизьте карту, чтобы увидеть контур\"\r\n    }\r\n});\r\n\r\nnsGmx.Translations.addText(\"eng\", {\r\n    FireVirtualLayer: {\r\n        \"LayerClusterBalloon\": \"<div style='margin-bottom: 5px;'><b style='color: red;'>Fire</b></div>\" +\r\n            \"<b>Number of hotspots:</b> [count]<br/>\" +\r\n            \"<b>Observation period:</b> [dateRange]<br/>\" +\r\n            \"<div>[SUMMARY]</div>\",\r\n        \"LayerClusterBalloonIndustrial\": \"<span style='margin-bottom: 5px;'><b style='color: red;'>Fire</b></span> (probable industrial hotspot <a target='_blank' href='http://fires.kosmosnimki.ru/help.html#techno'>?</a>)<br/>\" +\r\n            \"<b>Number of hotspots:</b> [count]<br/>\" +\r\n            \"<b>Observation period:</b> [dateRange]<br/>\" +\r\n            \"<div>[SUMMARY]</div>\",\r\n        \"LayerGeometryBalloon\": \"<div style='margin-bottom: 5px;'><b style='color: red;'>Fire outline</b></div>\" +\r\n            \"<b>Number of hotspots:</b> [count]<br/>\" +\r\n            \"<b>Observation period:</b> [dateRange]<br/>\" +\r\n            \"<div>[SUMMARY]</div>\",\r\n        \"zoomInMessage\": \"Zoom-in to see the outline\"\r\n    }\r\n});\r\n\r\n// для объединения квадратиков\r\n// Lookup table for pixel dimensions based on scan index of the pixel\r\nvar ModisPixelDimensions = [];\r\n\r\nfunction buildModisPixelDimensionsTable() {\r\n    // Don't rebuild the table if it was already built\r\n    if (ModisPixelDimensions.length > 0) {\r\n        return;\r\n    }\r\n\r\n    var h = 705.0; // Terra/Aqua orbit altitude [km]\r\n    var p = 1.0; // nadir pixel resolution [km]\r\n    var EARTH_RADIUS = 6371.0;\r\n    var SAMPLES = 1354;\r\n\r\n    var r = EARTH_RADIUS + h; /* [km] */\r\n    var s = p / h; /* [rad] */\r\n\r\n    for (var sample = 0; sample < 1354; sample++) {\r\n        var theta = sample * s + 0.5 * s - (0.5 * SAMPLES) * s;\r\n        var cos_theta = Math.cos(theta);\r\n\r\n        var temp = Math.pow((EARTH_RADIUS / r), 2.0) - Math.pow(Math.sin(theta), 2.0);\r\n        var sqrt_temp = Math.sqrt(temp);\r\n\r\n        var DS = EARTH_RADIUS * s * (cos_theta / sqrt_temp - 1.0) * 1000;\r\n        var DT = r * s * (cos_theta - sqrt_temp) * 1000;\r\n        ModisPixelDimensions[sample] = [DS, DT];\r\n    }\r\n}\r\n\r\n// тоже для квадратиков\r\nvar _hq = {\r\n    getDistant: function(cpt, bl) {\r\n        var Vy = bl[1][0] - bl[0][0];\r\n        var Vx = bl[0][1] - bl[1][1];\r\n        return (Vx * (cpt[0] - bl[0][0]) + Vy * (cpt[1] - bl[0][1]))\r\n    },\r\n    findMostDistantPointFromBaseLine: function(baseLine, points) {\r\n        var maxD = 0;\r\n        var maxPt = new Array();\r\n        var newPoints = new Array();\r\n        for (var idx in points) {\r\n            var pt = points[idx];\r\n            var d = this.getDistant(pt, baseLine);\r\n\r\n            if (d > 0) {\r\n                newPoints.push(pt);\r\n            } else {\r\n                continue;\r\n            }\r\n\r\n            if (d > maxD) {\r\n                maxD = d;\r\n                maxPt = pt;\r\n            }\r\n\r\n        }\r\n        return {\r\n            'maxPoint': maxPt,\r\n            'newPoints': newPoints\r\n        }\r\n    },\r\n\r\n    buildConvexHull: function(baseLine, points) {\r\n\r\n        var convexHullBaseLines = new Array();\r\n        var t = this.findMostDistantPointFromBaseLine(baseLine, points);\r\n        if (t.maxPoint.length) {\r\n            convexHullBaseLines = convexHullBaseLines.concat(this.buildConvexHull([baseLine[0], t.maxPoint], t.newPoints));\r\n            convexHullBaseLines = convexHullBaseLines.concat(this.buildConvexHull([t.maxPoint, baseLine[1]], t.newPoints));\r\n            return convexHullBaseLines;\r\n        } else {\r\n            return [baseLine];\r\n        }\r\n    },\r\n    getConvexHull: function(points) {\r\n\r\n        if (points.length == 1)\r\n            return [\r\n                [points[0], points[0]]\r\n            ];\r\n\r\n        //find first baseline\r\n        var maxX, minX;\r\n        var maxPt, minPt;\r\n        for (var idx in points) {\r\n            var pt = points[idx];\r\n            if (pt[0] > maxX || !maxX) {\r\n                maxPt = pt;\r\n                maxX = pt[0];\r\n            }\r\n            if (pt[0] < minX || !minX) {\r\n                minPt = pt;\r\n                minX = pt[0];\r\n            }\r\n        }\r\n        var ch = [].concat(this.buildConvexHull([minPt, maxPt], points),\r\n            this.buildConvexHull([maxPt, minPt], points))\r\n        return ch;\r\n    },\r\n    MultiPolygonUnion: function(multiPolygon) {\r\n        var matrixMultiPolygon = [],\r\n            unitedMultiPolygon = [],\r\n            nStartPolygons = 0,\r\n            currentPolygon;\r\n\r\n        do {\r\n            nStartPolygons = multiPolygon.length;\r\n            unitedMultiPolygon = [];\r\n\r\n            while (multiPolygon.length > 0) {\r\n                currentPolygon = multiPolygon.pop();\r\n                var iOther = 0;\r\n\r\n                // Check if it overlaps with any remaining polygons\r\n                while (iOther < multiPolygon.length) {\r\n\r\n                    var unionResults = currentPolygon.union(multiPolygon[iOther]);\r\n\r\n                    if (unionResults != null) {\r\n                        currentPolygon = unionResults;\r\n                        multiPolygon.splice(iOther, 1);\r\n                    } else {\r\n                        iOther++;\r\n                    }\r\n                }\r\n                unitedMultiPolygon.push(currentPolygon)\r\n            }\r\n            multiPolygon = unitedMultiPolygon;\r\n        } while (multiPolygon.length < nStartPolygons);\r\n\r\n        for (var i = 0; i < unitedMultiPolygon.length; i++) {\r\n            var poly = unitedMultiPolygon[i].to_point_array_2d();\r\n            poly.push(poly[0]);\r\n\r\n            matrixMultiPolygon.push([poly]);\r\n        }\r\n\r\n        return matrixMultiPolygon;\r\n    },\r\n    getPixelMultiPolygon: function(points) {\r\n        var results = [];\r\n\r\n        for (var i = 0; i < points.length; i++) {\r\n            var pt = points[i];\r\n            var dims = ModisPixelDimensions[pt[2]];\r\n\r\n            var merc = L.Projection.Mercator.project({\r\n                lat: pt[1],\r\n                lng: pt[0]\r\n            });\r\n            var X1 = merc.x;\r\n            var Y1 = merc.y;\r\n\r\n            var X2 = X1 + 1000;\r\n            var Y2 = Y1;\r\n\r\n            var newLatLng = L.Projection.Mercator.unproject({\r\n                x: X2,\r\n                y: Y2\r\n            });\r\n            var newLat = pt[1];\r\n            var newLon = newLatLng.lng;\r\n\r\n            var mdelta = L.gmxUtil.distVincenty(pt[0], pt[1], newLon, newLat);\r\n\r\n            var h_scale = dims[0] / mdelta;\r\n            var v_scale = dims[1] / mdelta;\r\n\r\n\r\n            var h_dx = 0.5 * (X2 - X1) * h_scale;\r\n            var h_dy = 0.5 * (Y2 - Y1) * h_scale;\r\n\r\n            var v_dx = 0.5 * (Y2 - Y1) * v_scale;\r\n            var v_dy = 0.5 * (X2 - X1) * v_scale;\r\n\r\n            var frontX = X1 + h_dx;\r\n            var frontY = Y1 + h_dy;\r\n\r\n            var backX = X1 - h_dx;\r\n            var backY = Y1 - h_dy;\r\n\r\n            var corner1x = frontX + v_dx;\r\n            var corner1y = frontY + v_dy;\r\n\r\n            var corner2x = frontX - v_dx;\r\n            var corner2y = frontY - v_dy;\r\n\r\n            var corner3x = backX - v_dx;\r\n            var corner3y = backY - v_dy;\r\n\r\n            var corner4x = backX + v_dx;\r\n            var corner4y = backY + v_dy;\r\n\r\n            results.push(SpatialQuery.$p([\r\n                [corner1x, corner1y],\r\n                [corner2x, corner2y],\r\n                [corner3x, corner3y],\r\n                [corner4x, corner4y]\r\n            ]));\r\n        }\r\n\r\n        return results;\r\n    }\r\n}\r\n\r\n\r\n\r\n// для вычисления расширенного ббокса\r\nvar mercBbox = function(latlngBbox) {\r\n    var mercMin = L.Projection.Mercator.project({\r\n        lat: latlngBbox.min.y,\r\n        lng: latlngBbox.min.x\r\n    });\r\n    var mercMax = L.Projection.Mercator.project({\r\n        lat: latlngBbox.max.y,\r\n        lng: latlngBbox.max.x\r\n    });\r\n    return L.gmxUtil.bounds([\r\n        [mercMin.x, mercMin.y],\r\n        [mercMax.x, mercMax.y]\r\n    ]);\r\n}\r\n\r\nvar fromMercBbox = function(bbox) {\r\n    var min = L.Projection.Mercator.unproject(bbox.min);\r\n    var max = L.Projection.Mercator.unproject(bbox.max);\r\n    return L.gmxUtil.bounds([\r\n        [min.lng, min.lat],\r\n        [max.lng, max.lat]\r\n    ]);\r\n}\r\n\r\nvar getExtendedBbox = function(mercOld, newBbox) {\r\n    var extendBbox = function(bbox) {\r\n        var sx = (bbox.max.x - bbox.min.x) * 0.15,\r\n            sy = (bbox.max.y - bbox.min.y) * 0.15;\r\n\r\n        return L.gmxUtil.bounds([\r\n            [bbox.min.x - sx, bbox.min.y - sy],\r\n            [bbox.max.x + sx, bbox.max.y + sy]\r\n        ]);\r\n    }\r\n\r\n    var mercNew = mercBbox(newBbox);\r\n\r\n    if (!mercOld) {\r\n        return fromMercBbox(extendBbox(mercNew));\r\n    }\r\n\r\n    var oldSquare = (mercOld.max.x - mercOld.min.x) * (mercOld.max.y - mercOld.min.y),\r\n        newSquare = (mercNew.max.x - mercNew.min.x) * (mercNew.max.y - mercNew.min.y);\r\n\r\n    if (!mercOld.contains([mercNew.min.x, mercNew.min.y]) || !mercOld.contains([mercNew.max.x, mercNew.max.y]) || 2 * newSquare <\r\n        oldSquare) {\r\n        return fromMercBbox(extendBbox(mercNew));\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\n/*\r\n (c) 2014, Vladimir Agafonkin\r\n simpleheat, a tiny JavaScript library for drawing heatmaps with Canvas\r\n https://github.com/mourner/simpleheat\r\n*/\r\n\r\nfunction simpleheat(canvas) {\r\n    // jshint newcap: false, validthis: true\r\n    if (!(this instanceof simpleheat)) { return new simpleheat(canvas); }\r\n\r\n    this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\r\n\r\n    this._ctx = canvas.getContext('2d');\r\n    this._width = canvas.width;\r\n    this._height = canvas.height;\r\n\r\n    this._max = 1;\r\n    this._data = [];\r\n}\r\n\r\nsimpleheat.prototype = {\r\n\r\n    defaultRadius: 25,\r\n\r\n    defaultGradient: {\r\n        0.4: 'blue',\r\n        0.6: 'cyan',\r\n        0.7: 'lime',\r\n        0.8: 'yellow',\r\n        1.0: 'red'\r\n    },\r\n\r\n    data: function (data) {\r\n        this._data = data;\r\n        return this;\r\n    },\r\n\r\n    max: function (max) {\r\n        this._max = max;\r\n        return this;\r\n    },\r\n\r\n    add: function (point) {\r\n        this._data.push(point);\r\n        return this;\r\n    },\r\n\r\n    clear: function () {\r\n        this._data = [];\r\n        return this;\r\n    },\r\n\r\n    radius: function(r, blur) {\r\n        this._radius = r;\r\n        this._blur = blur || 15;\r\n        this._r = r + this._blur;\r\n        return this;\r\n    },\r\n\r\n    minRadius: function(r) {\r\n        this._minRadius = r;\r\n        return this;\r\n    },\r\n\r\n    _circle: function (r, blur) {\r\n        // create a grayscale blurred circle image that we'll use for drawing points\r\n        var circle = document.createElement('canvas'),\r\n            ctx = circle.getContext('2d'),\r\n            r2 = r + blur;\r\n\r\n        circle.width = circle.height = r2 * 2;\r\n\r\n        ctx.shadowOffsetX = ctx.shadowOffsetY = 200;\r\n        ctx.shadowBlur = blur;\r\n        ctx.shadowColor = 'black';\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(r2 - 200, r2 - 200, r, 0, Math.PI * 2, true);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n        return circle;\r\n    },\r\n\r\n    gradient: function (grad) {\r\n        // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\r\n        var canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            gradient = ctx.createLinearGradient(0, 0, 0, 256);\r\n\r\n        canvas.width = 1;\r\n        canvas.height = 256;\r\n\r\n        for (var i in grad) {\r\n            gradient.addColorStop(i, grad[i]);\r\n        }\r\n\r\n        ctx.fillStyle = gradient;\r\n        ctx.fillRect(0, 0, 1, 256);\r\n\r\n        this._grad = ctx.getImageData(0, 0, 1, 256).data;\r\n\r\n        return this;\r\n    },\r\n\r\n    draw: function (minOpacity) {\r\n        if (!this._circle) {\r\n            this.radius(this.defaultRadius);\r\n        }\r\n        if (!this._grad) {\r\n            this.gradient(this.defaultGradient);\r\n        }\r\n\r\n        var ctx = this._ctx;\r\n\r\n        ctx.clearRect(0, 0, this._width, this._height);\r\n\r\n        // draw a grayscale heatmap by putting a blurred circle at each data point\r\n        for (var i = 0, len = this._data.length, p; i < len; i++) {\r\n            p = this._data[i];\r\n\r\n            ctx.globalAlpha = Math.max(p[2] / this._max, minOpacity === undefined ? 0.05 : minOpacity);\r\n            var rr, bl;\r\n            if (this._minRadius) {\r\n                rr = Math.max(this._radius * (p[2] / this._max), this._minRadius);\r\n                bl = rr/this._radius * this._blur;\r\n            } else {\r\n                rr = this._radius;\r\n                bl = this._blur;\r\n            }\r\n            ctx.drawImage(this._circle(rr, bl), p[0] - (rr + bl), p[1] - (rr + bl));\r\n        }\r\n\r\n        // colorize the heatmap, using opacity value of each pixel to get the right color from our gradient\r\n        var colored = ctx.getImageData(0, 0, this._width, this._height);\r\n        this._colorize(colored.data, this._grad);\r\n        ctx.putImageData(colored, 0, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    _colorize: function (pixels, gradient) {\r\n        for (var i = 3, len = pixels.length, j; i < len; i += 4) {\r\n            j = pixels[i] * 4; // get gradient color from opacity value\r\n\r\n            if (j) {\r\n                pixels[i - 3] = gradient[j];\r\n                pixels[i - 2] = gradient[j + 1];\r\n                pixels[i - 1] = gradient[j + 2];\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/*\r\n (c) 2014, Vladimir Agafonkin\r\n Leaflet.heat, a tiny and fast heatmap plugin for Leaflet.\r\n https://github.com/Leaflet/Leaflet.heat\r\n*/\r\n\r\n// в виртуальном слое пожаров используется изменённая версия HeatLayer\r\n// по-этому добавляем этот модуль в сборку\r\n\r\nvar HeatLayer = (L.Layer ? L.Layer : L.Class).extend({\r\n\r\n    // options: {\r\n    //     minOpacity: 0.05,\r\n    //     maxZoom: 18,\r\n    //     radius: 25,\r\n    //     blur: 15,\r\n    //     max: 1.0\r\n    // },\r\n\r\n    initialize: function(latlngs, options) {\r\n        this._latlngs = latlngs;\r\n        L.setOptions(this, options);\r\n    },\r\n\r\n    setLatLngs: function(latlngs) {\r\n        this._latlngs = latlngs;\r\n        return this.redraw();\r\n    },\r\n\r\n    addLatLng: function(latlng) {\r\n        this._latlngs.push(latlng);\r\n        return this.redraw();\r\n    },\r\n\r\n    setOptions: function(options) {\r\n        L.setOptions(this, options);\r\n        if (this._heat) {\r\n            this._updateOptions();\r\n        }\r\n        return this.redraw();\r\n    },\r\n\r\n    redraw: function() {\r\n        if (this._heat && !this._frame && !this._map._animating) {\r\n            this._frame = L.Util.requestAnimFrame(this._redraw, this);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    onAdd: function(map) {\r\n        this._map = map;\r\n\r\n        if (!this._canvas) {\r\n            this._initCanvas();\r\n        }\r\n\r\n        map._panes.overlayPane.appendChild(this._canvas);\r\n\r\n        map.on('moveend', this._reset, this);\r\n\r\n        if (map.options.zoomAnimation && L.Browser.any3d) {\r\n            map.on('zoomanim', this._animateZoom, this);\r\n        }\r\n\r\n        this._reset();\r\n    },\r\n\r\n    onRemove: function(map) {\r\n        map.getPanes().overlayPane.removeChild(this._canvas);\r\n\r\n        map.off('moveend', this._reset, this);\r\n\r\n        if (map.options.zoomAnimation) {\r\n            map.off('zoomanim', this._animateZoom, this);\r\n        }\r\n    },\r\n\r\n    addTo: function(map) {\r\n        map.addLayer(this);\r\n        return this;\r\n    },\r\n\r\n    _initCanvas: function() {\r\n        var canvas = this._canvas = L.DomUtil.create('canvas', 'leaflet-heatmap-layer leaflet-layer');\r\n\r\n        var size = this._map.getSize();\r\n        canvas.width = size.x;\r\n        canvas.height = size.y;\r\n\r\n        var animated = this._map.options.zoomAnimation && L.Browser.any3d;\r\n        L.DomUtil.addClass(canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\r\n\r\n        this._heat = simpleheat(canvas);\r\n        this._updateOptions();\r\n    },\r\n\r\n    _updateOptions: function() {\r\n        this._heat.radius(this.options.radius || this._heat.defaultRadius, this.options.blur);\r\n\r\n        if (this.options.gradient) {\r\n            this._heat.gradient(this.options.gradient);\r\n        }\r\n        if (this.options.max) {\r\n            this._heat.max(this.options.max);\r\n        }\r\n        if (this.options.minRadius) {\r\n            this._heat.minRadius(this.options.minRadius);\r\n        }\r\n    },\r\n\r\n    _reset: function() {\r\n        var topLeft = this._map.containerPointToLayerPoint([0, 0]);\r\n        L.DomUtil.setPosition(this._canvas, topLeft);\r\n\r\n        var size = this._map.getSize();\r\n\r\n        if (this._heat._width !== size.x) {\r\n            this._canvas.width = this._heat._width = size.x;\r\n        }\r\n        if (this._heat._height !== size.y) {\r\n            this._canvas.height = this._heat._height = size.y;\r\n        }\r\n\r\n        this._redraw();\r\n    },\r\n\r\n    _redraw: function() {\r\n        var data = [],\r\n            r = this._heat._r,\r\n            size = this._map.getSize(),\r\n            bounds = new L.LatLngBounds(\r\n                this._map.containerPointToLatLng(L.point([-r, -r])),\r\n                this._map.containerPointToLatLng(size.add([r, r]))),\r\n\r\n            maxZoom = this.options.maxZoom === undefined ? this._map.getMaxZoom() : this.options.maxZoom,\r\n            v = 1 / Math.pow(2, Math.max(0, Math.min(maxZoom - this._map.getZoom(), 12))),\r\n            cellSize = r / 2,\r\n            grid = [],\r\n            panePos = this._map._getMapPanePos(),\r\n            offsetX = panePos.x % cellSize,\r\n            offsetY = panePos.y % cellSize,\r\n            i, len, p, cell, x, y, j, len2, k;\r\n\r\n        // console.time('process');\r\n        for (i = 0, len = this._latlngs.length; i < len; i++) {\r\n            if (bounds.contains(this._latlngs[i])) {\r\n                p = this._map.latLngToContainerPoint(this._latlngs[i]);\r\n                x = Math.floor((p.x - offsetX) / cellSize) + 2;\r\n                y = Math.floor((p.y - offsetY) / cellSize) + 2;\r\n\r\n                var alt =\r\n                    this._latlngs[i].alt !== undefined ? this._latlngs[i].alt :\r\n                    this._latlngs[i][2] !== undefined ? +this._latlngs[i][2] : 1;\r\n                k = alt * v;\r\n\r\n                grid[y] = grid[y] || [];\r\n                cell = grid[y][x];\r\n\r\n                if (!cell) {\r\n                    grid[y][x] = [p.x, p.y, k];\r\n\r\n                } else {\r\n                    cell[0] = (cell[0] * cell[2] + p.x * k) / (cell[2] + k); // x\r\n                    cell[1] = (cell[1] * cell[2] + p.y * k) / (cell[2] + k); // y\r\n                    cell[2] += k; // cumulated intensity value\r\n                }\r\n            }\r\n        }\r\n\r\n        for (i = 0, len = grid.length; i < len; i++) {\r\n            if (grid[i]) {\r\n                for (j = 0, len2 = grid[i].length; j < len2; j++) {\r\n                    cell = grid[i][j];\r\n                    if (cell) {\r\n                        data.push([\r\n                            Math.round(cell[0]),\r\n                            Math.round(cell[1]),\r\n                            Math.min(cell[2], 1)\r\n                        ]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // console.timeEnd('process');\r\n\r\n        // console.time('draw ' + data.length);\r\n        this._heat.data(data).draw(this.options.minOpacity);\r\n        // console.timeEnd('draw ' + data.length);\r\n\r\n        this._frame = null;\r\n    },\r\n\r\n    _animateZoom: function(e) {\r\n        var scale = this._map.getZoomScale(e.zoom),\r\n            offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\r\n\r\n        if (L.DomUtil.setTransform) {\r\n            L.DomUtil.setTransform(this._canvas, offset, scale);\r\n\r\n        } else {\r\n            this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\r\n        }\r\n    }\r\n});\r\n\r\nvar FireVirtualLayer = L.Class.extend({\r\n    options: {\r\n        minClustersZoom: 4,\r\n        minGeomZoom: 8,\r\n        minHotspotZoom: 11,\r\n        hostName: 'maps.kosmosnimki.ru'\r\n            // mapID\r\n            // hotspotLayerID\r\n            // dailyLayerID\r\n            // z_index\r\n    },\r\n\r\n    initialize: function(options) {\r\n        L.setOptions(this, options);\r\n\r\n        this._clustersLayer = L.gmx.createLayer({\r\n            properties: {\r\n                title: 'FireClusters',\r\n                attributes: ['scale', 'count', 'label', 'startDate', 'endDate', 'dateRange', 'isIndustrial'],\r\n                styles: [{\r\n                    Filter: '\"isIndustrial\"=0',\r\n                    Balloon: nsGmx.Translations.getText('FireVirtualLayer.LayerClusterBalloon'),\r\n                    MinZoom: this.options.minClustersZoom,\r\n                    MaxZoom: this.options.minGeomZoom - 1,\r\n                    RenderStyle: {\r\n                        fill: {\r\n                            radialGradient: {\r\n                                r1: 0,\r\n                                r2: '[scale]*20',\r\n                                addColorStop: [\r\n                                    [0, 0xffff00, 50],\r\n                                    [1, 0xff0000, 50]\r\n                                ]\r\n                            }\r\n                        },\r\n                        label: {\r\n                            size: 12,\r\n                            color: 0xffffff,\r\n                            field: 'label',\r\n                            align: 'center'\r\n                        }\r\n                    }\r\n                }, {\r\n                    Filter: '\"isIndustrial\"=1',\r\n                    Balloon: nsGmx.Translations.getText('FireVirtualLayer.LayerClusterBalloonIndustrial'),\r\n                    MinZoom: this.options.minClustersZoom,\r\n                    MaxZoom: this.options.minGeomZoom - 1,\r\n                    RenderStyle: {\r\n                        fill: {\r\n                            radialGradient: {\r\n                                r1: 0,\r\n                                r2: '[scale]*20',\r\n                                addColorStop: [\r\n                                    [0, 0xffffff, 80],\r\n                                    [1, 0xffaa00, 80]\r\n                                ]\r\n                            }\r\n                        }\r\n                    }\r\n                }]\r\n            }\r\n        });\r\n\r\n        this._clustersGeomLayer = L.gmx.createLayer({\r\n            properties: {\r\n                type: 'Vector',\r\n                title: 'FirePolygons',\r\n                attributes: ['scale', 'count', 'label', 'startDate', 'endDate', 'dateRange', 'isIndustrial'],\r\n                styles: [{\r\n                    Balloon: nsGmx.Translations.getText('FireVirtualLayer.LayerGeometryBalloon'),\r\n                    MinZoom: this.options.minGeomZoom,\r\n                    MaxZoom: 21,\r\n                    RenderStyle: {\r\n                        outline: {\r\n                            color: 0xff0000,\r\n                            thickness: 2\r\n                        },\r\n                        fill: {\r\n                            color: 0xff0000,\r\n                            opacity: 15\r\n                        }\r\n                    },\r\n                    HoverStyle: {\r\n                        outline: {\r\n                            color: 0xff0000,\r\n                            thickness: 3\r\n                        },\r\n                        fill: {\r\n                            color: 0xff0000,\r\n                            opacity: 45\r\n                        }\r\n                    }\r\n                }]\r\n            }\r\n        });\r\n\r\n        this._heatmapLayer = new HeatLayer([], {\r\n            \"gradient\": {\r\n                \"1.00\": \"#FFFFFF\",\r\n                \"0.90\": \"#FFAA00\",\r\n                \"0.85\": \"#FF8800\",\r\n                \"0.75\": \"#E65C00\",\r\n                \"0.55\": \"#DB1D00\"\r\n            },\r\n            \"blur\": 30,\r\n            \"radius\": 17,\r\n            \"minRadius\": 7,\r\n            \"minOpacity\": 0.65\r\n        });\r\n\r\n        if (this.options['z_index']) {\r\n            this._clustersLayer.setZIndex(this.options['z_index']);\r\n            this._clustersGeomLayer.setZIndex(this.options['z_index']);\r\n        }\r\n\r\n        var _this = this;\r\n        this._clustersLayer.on('popupopen', function(event) {\r\n            var popup = event.popup,\r\n                html = popup.getContent(),\r\n                zoomLink = $('<div style=\"margin-top: 5px;\"><a href=\"javascript:void(0)\"><i>' + nsGmx.Translations.getText(\r\n                    'FireVirtualLayer.zoomInMessage') + '</i></a></div>').click(function() {\r\n                    _this._map.closePopup(event.popup);\r\n                    _this._map.setView(event.gmx.latlng, _this.options.minGeomZoom + 3);\r\n                });\r\n\r\n            var div = $('<div/>').html(html).append(zoomLink);\r\n            event.popup.setContent(div[0]);\r\n        })\r\n    },\r\n\r\n    onAdd: function(map) {\r\n        buildModisPixelDimensionsTable();\r\n        this._map = map;\r\n        this._layerIsVisible = true;\r\n        this._lazyLoadDataLayers().then(function() {\r\n            if (!this._map || !this._layerIsVisible) {\r\n                return;\r\n            }\r\n\r\n            map.on('zoomend', this._updateLayersVisibility, this);\r\n            map.on('moveend', this._updateBbox, this);\r\n\r\n            this._updateLayersVisibility();\r\n            this._updateBbox();\r\n\r\n            map.addLayer(this._clustersLayer);\r\n            map.addLayer(this._clustersGeomLayer);\r\n            map.addLayer(this._hotspotLayer);\r\n        }.bind(this));\r\n    },\r\n\r\n    onRemove: function(map) {\r\n        delete this._map;\r\n        this._layerIsVisible = false;\r\n        map.off('moveend', this._updateBbox, this);\r\n        map.off('zoomend', this._updateLayersVisibility, this);\r\n        this._updateLayersVisibility();\r\n        this._lazyLoadDataLayers().then(function() {\r\n            if (this._layerIsVisible) {\r\n                return;\r\n            }\r\n\r\n            map.removeLayer(this._clustersGeomLayer);\r\n            map.removeLayer(this._clustersLayer);\r\n            map.removeLayer(this._hotspotLayer);\r\n            map.removeLayer(this._heatmapLayer);\r\n        }.bind(this))\r\n    },\r\n\r\n    setDateInterval: function(dateBegin, dateEnd) {\r\n        this._dateBegin = dateBegin;\r\n        this._dateEnd = dateEnd;\r\n        this._rawClusterLayer && this._rawClusterLayer.setDateInterval(dateBegin, dateEnd);\r\n        this._hotspotLayer && this._hotspotLayer.setDateInterval(dateBegin, dateEnd);\r\n\r\n        this._observerClusters && this._observerClusters.setDateInterval(dateBegin, dateEnd);\r\n        this._observerHotspots && this._observerHotspots.setDateInterval(dateBegin, dateEnd);\r\n        this._observerHeatmap && this._observerHeatmap.setDateInterval(dateBegin, dateEnd);\r\n    },\r\n\r\n    _updateBbox: function() {\r\n        var observersBbox = this._observerHotspots.bbox,\r\n            screenBounds = this._map.getBounds(),\r\n            p1 = screenBounds.getNorthWest(),\r\n            p2 = screenBounds.getSouthEast(),\r\n            newBbox = L.gmxUtil.bounds([\r\n                [p1.lng, p1.lat],\r\n                [p2.lng, p2.lat]\r\n            ]),\r\n            extendedBbox = getExtendedBbox(observersBbox, newBbox);\r\n\r\n        if (extendedBbox) {\r\n            this._observerHotspots.setBounds(extendedBbox);\r\n            this._observerClusters.setBounds(extendedBbox);\r\n            this._observerHeatmap.setBounds(extendedBbox);\r\n        }\r\n    },\r\n\r\n    //load layers add add observers\r\n    _lazyLoadDataLayers: function() {\r\n        if (this._loadLayersPromise) {\r\n            return this._loadLayersPromise;\r\n        }\r\n\r\n        var heatmapLayerID = this.options.heatmapLayerID || this.options.hotspotLayerID;\r\n\r\n        this._loadLayersPromise = L.gmx.loadLayers([{\r\n            mapID: this.options.mapID,\r\n            layerID: this.options.hotspotLayerID\r\n        }, {\r\n            mapID: this.options.mapID,\r\n            layerID: this.options.dailyLayerID\r\n        }], {\r\n            hostName: this.options.hostName\r\n        }).then(function(rawHotspotLayer, rawClustersLayer) {\r\n\r\n            if (this.options.minHotspotZoom) {\r\n                var minZoom = this.options.minHotspotZoom;\r\n                rawHotspotLayer.setStyles(rawHotspotLayer.getStyles().map(function(style) {\r\n                    style.MinZoom = minZoom;\r\n                    return style;\r\n                }));\r\n            }\r\n\r\n            var rawHeatmapLayer;\r\n            if (heatmapLayerID === rawHotspotLayer.options.layerID) {\r\n                rawHeatmapLayer = rawHotspotLayer;\r\n            }\r\n            if (heatmapLayerID === rawClustersLayer.options.layerID) {\r\n                rawHeatmapLayer = rawClustersLayer;\r\n            }\r\n\r\n            this._hotspotLayer = rawHotspotLayer;\r\n\r\n            if (this._dateBegin && this._dateEnd) {\r\n                this._hotspotLayer.setDateInterval(this._dateBegin, this._dateEnd);\r\n            }\r\n\r\n            this._rawClusterLayer = rawClustersLayer;\r\n\r\n            if (this.options['z_index']) {\r\n                this._hotspotLayer.setZIndex(this.options['z_index']);\r\n            }\r\n\r\n            this._observerHeatmap = rawHeatmapLayer.addObserver({\r\n                type: 'update',\r\n                callback: this._createHeatmapObserverCallback(rawHeatmapLayer, this._heatmapLayer),\r\n                active: !!this._map,\r\n                dateInterval: [this._dateBegin, this._dateEnd]\r\n            });\r\n\r\n            this._observerClusters = rawClustersLayer.addObserver({\r\n                type: 'update',\r\n                callback: this._updateClustersByObject(this._clustersLayer, false, 'ParentClusterId',\r\n                    'HotSpotCount', rawClustersLayer),\r\n                active: !!this._map,\r\n                dateInterval: [this._dateBegin, this._dateEnd]\r\n            });\r\n\r\n            this._observerHotspots = rawHotspotLayer.addObserver({\r\n                type: 'update',\r\n                callback: this._updateClustersByObject(this._clustersGeomLayer, true, 'ClusterID', null,\r\n                    rawHotspotLayer),\r\n                active: !!this._map,\r\n                dateInterval: [this._dateBegin, this._dateEnd]\r\n            });\r\n        }.bind(this));\r\n\r\n        return this._loadLayersPromise;\r\n    },\r\n\r\n    _createHeatmapObserverCallback: function(srcLayer, heatLayer) {\r\n        var pointsBuffer = [];\r\n\r\n        var weightFieldsHash = {\r\n            'F2840D287CD943C4B1122882C5B92565': 4,\r\n            'C13B4D9706F7491EBC6DC70DFFA988C0': 4,\r\n            'E58063D97D534BB4BBDFF07FE5CB17F2': 1,\r\n            '3E88643A8AC94AFAB4FD44941220B1CE': 1\r\n        }\r\n\r\n        function addData(data) {\r\n            pointsBuffer = pointsBuffer.concat(data);\r\n            return pointsBuffer;\r\n        }\r\n\r\n        function removeData(data) {\r\n            pointsBuffer = pointsBuffer.filter(function(it) {\r\n                return !data.find(function (d) {\r\n                    return d.id === it.id\r\n                })\r\n            })\r\n            return pointsBuffer\r\n        }\r\n\r\n        function parser(data) {\r\n            return data.map(function(d) {\r\n                var props = d.properties;\r\n\r\n                var latlng = L.Projection.Mercator.unproject({\r\n                    y: props[props.length - 1].coordinates[1],\r\n                    x: props[props.length - 1].coordinates[0]\r\n                })\r\n\r\n                var r = [latlng.lat, latlng.lng];\r\n                var fi = weightFieldsHash[srcLayer.options.layerID];\r\n                fi && props[fi] && r.push(factor(props[fi]));\r\n\r\n                return r;\r\n            })\r\n        }\r\n\r\n        function factor(w) {\r\n            return 3800 * (Math.pow(Math.log(w + 1), 1.3) / 3.5);\r\n        }\r\n\r\n        return function(data) {\r\n            data.added && addData(data.added);\r\n            data.removed && removeData(data.removed);\r\n            heatLayer.setLatLngs(parser(pointsBuffer));\r\n        }\r\n    },\r\n\r\n    _updateClustersByObject: function(layer, estimeteGeometry, clusterAttr, countAttr, fromLayer) {\r\n        var indexes = fromLayer._gmx.tileAttributeIndexes,\r\n            dateAttr = fromLayer.getGmxProperties().TemporalColumnName,\r\n            idAttr = fromLayer.getGmxProperties().identityField;\r\n\r\n        var parseItem = function(item) {\r\n            var props = item.properties;\r\n            return {\r\n                properties: L.gmxUtil.getPropertiesHash(props, indexes),\r\n                geometry: props[props.length - 1]\r\n            };\r\n        };\r\n\r\n        var clusters = {};\r\n\r\n        return function(data) {\r\n            var objects = [];\r\n            var clustersToRepaint = {};\r\n\r\n            (data.removed || []).map(function(it) {\r\n                objects.push({\r\n                    onExtent: false,\r\n                    item: parseItem(it)\r\n                });\r\n            });\r\n            (data.added || []).map(function(it) {\r\n                objects.push({\r\n                    onExtent: true,\r\n                    item: parseItem(it)\r\n                });\r\n            });\r\n\r\n            for (var k = 0; k < objects.length; k++) {\r\n                var props = objects[k].item.properties;\r\n                var mult = objects[k].onExtent ? 1 : -1;\r\n                var count = (countAttr ? props[countAttr] : 1) * mult;\r\n\r\n                if (!props[clusterAttr])\r\n                    continue;\r\n\r\n                var clusterId = '_' + props[clusterAttr];\r\n                var hotspotId = '_' + props[idAttr];\r\n\r\n                if (!clusters[clusterId]) {\r\n                    clusters[clusterId] = {\r\n                        spots: {},\r\n                        lat: 0,\r\n                        lng: 0,\r\n                        count: 0,\r\n                        startDate: Number.POSITIVE_INFINITY,\r\n                        endDate: Number.NEGATIVE_INFINITY,\r\n                        isIndustrial: false\r\n                    };\r\n                }\r\n                var cluster = clusters[clusterId];\r\n\r\n                //два раза одну и ту же точку не добавляем\r\n                if (hotspotId in cluster.spots && objects[k].onExtent)\r\n                    continue;\r\n\r\n                var coords = objects[k].item.geometry.coordinates,\r\n                    latlng = L.Projection.Mercator.unproject({\r\n                        y: coords[1],\r\n                        x: coords[0]\r\n                    });\r\n\r\n                if (objects[k].onExtent)\r\n                    cluster.spots[hotspotId] = [latlng.lng, latlng.lat, 250]; //TODO: выбрать правильный номер sample\r\n                else\r\n                    delete cluster.spots[hotspotId];\r\n\r\n                var hotspotDate = props[dateAttr];\r\n\r\n                cluster.lat += count * coords[1];\r\n                cluster.lng += count * coords[0];\r\n                cluster.count += count;\r\n                cluster.startDate = Math.min(cluster.startDate, hotspotDate);\r\n                cluster.endDate = Math.max(cluster.endDate, hotspotDate);\r\n                cluster.isIndustrial = cluster.isIndustrial || (Number(props.FireType) & 1);\r\n\r\n                clustersToRepaint[clusterId] = true;\r\n            }\r\n\r\n            var clustersToAdd = [],\r\n                itemIDsToRemove = [];\r\n\r\n            for (var k in clustersToRepaint) {\r\n                var cluster = clusters[k],\r\n                    count = cluster.count;\r\n                if (count) {\r\n                    var strStartDate = dateToString(cluster.startDate);\r\n                    var strEndDate = dateToString(cluster.endDate);\r\n\r\n                    var newItem = [\r\n                        k,\r\n                        String(Math.pow(Math.log(count + 1), 1.3) / 3.5),\r\n                        count,\r\n                        count >= 10 ? count : null,\r\n                        cluster.startDate,\r\n                        cluster.endDate,\r\n                        cluster.startDate === cluster.endDate ? strEndDate : strStartDate + '-' + strEndDate,\r\n                        Number(cluster.isIndustrial)\r\n                    ];\r\n\r\n                    if (estimeteGeometry) {\r\n                        var points = [];\r\n                        for (var p in clusters[k].spots)\r\n                            points.push(clusters[k].spots[p]);\r\n\r\n                        var multiPolygon = _hq.getPixelMultiPolygon(points);\r\n                        var tmpPolygon = _hq.MultiPolygonUnion(multiPolygon);\r\n\r\n                        newItem.push({\r\n                            type: 'MULTIPOLYGON',\r\n                            coordinates: tmpPolygon\r\n                        });\r\n                    } else {\r\n                        newItem.push({\r\n                            type: 'POINT',\r\n                            coordinates: [clusters[k].lng / count, clusters[k].lat / count]\r\n                        });\r\n                    }\r\n\r\n                    clustersToAdd.push(newItem);\r\n                } else {\r\n                    itemIDsToRemove.push(k);\r\n                    delete clusters[k];\r\n\r\n                }\r\n            }\r\n\r\n            layer.addData(clustersToAdd);\r\n            layer.removeData(itemIDsToRemove);\r\n        }\r\n\r\n        // для балунов\r\n        function dateToString(timestamp) {\r\n            var date = new Date(timestamp * 1000);\r\n\r\n            var lz = function(n) {\r\n                return n > 9 ? n : '0' + n;\r\n            };\r\n\r\n            return lz(date.getUTCDate()) + '.' + lz(date.getUTCMonth() + 1) + '.' + date.getUTCFullYear();\r\n        }\r\n\r\n    },\r\n\r\n    _updateLayersVisibility: function() {\r\n        var map = this._map;\r\n        var isVisible = !!map,\r\n            zoom = this._map && this._map.getZoom();\r\n\r\n        this._observerHotspots && this._observerHotspots.toggleActive(isVisible && zoom >= this.options.minGeomZoom);\r\n        this._observerClusters && this._observerClusters.toggleActive(isVisible && (zoom >= this.options.minClustersZoom && zoom < this.options\r\n            .minGeomZoom));\r\n        this._observerHeatmap && this._observerHeatmap.toggleActive(isVisible && zoom < this.options.minClustersZoom);\r\n\r\n        // this._heatmapLayer && this._heatmapLayer.setVisibility(isVisible && zoom < this.options.minClustersZoom);\r\n        map && ((isVisible && zoom < this.options.minClustersZoom) ? map.addLayer(this._heatmapLayer) : map.removeLayer(this._heatmapLayer));\r\n    }\r\n});\r\n\r\nvar FireVirtualFactory = function() {};\r\nFireVirtualFactory.prototype.initFromDescription = function(layerDescription) {\r\n    var props = layerDescription.properties,\r\n        meta = props.MetaProperties;\r\n\r\n    var options = {\r\n        mapID: meta.mapID.Value,\r\n        hotspotLayerID: meta.hotspotLayerID.Value,\r\n        dailyLayerID: meta.dailyLayerID.Value,\r\n        heatmapLayerID: meta.heatmapLayerID &&  meta.heatmapLayerID.Value,\r\n        z_index: meta.z_index && meta.z_index.Value\r\n    }\r\n\r\n    if ('minGeomZoom' in meta) {\r\n        options.minGeomZoom = Number(meta.minGeomZoom.Value);\r\n    }\r\n\r\n    if ('minHotspotZoom' in meta) {\r\n        options.minHotspotZoom = Number(meta.minHotspotZoom.Value);\r\n    }\r\n\r\n    if ('minClustersZoom' in meta) {\r\n        options.minClustersZoom = Number(meta.minClustersZoom.Value);\r\n    }\r\n\r\n    var layer = new FireVirtualLayer(options);\r\n\r\n    layer.getGmxProperties = function() {\r\n        return props;\r\n    }\r\n\r\n    return layer;\r\n}\r\n\r\nL.gmx.addLayerClass('Fire', FireVirtualFactory);\r\n}());\r\n\n\n\n// WEBPACK FOOTER //\n// ./external/FireVirtualLayer/dist/fireVirtualLayer.js","/** Leaflet layers\r\n*/\r\n(function (){\r\n    \r\nvar GFW_ATTRIBUTION = '<a href=\"http://glad.umd.edu/\"> Hansen|UMD|Google|USGS|NASA </a>';\r\n\r\nL.GFWLayer = L.TileLayer.Canvas.extend({\r\n    options: {\r\n        async: true,\r\n        attribution: GFW_ATTRIBUTION\r\n    },\r\n    _yearBegin: 2001,\r\n    _yearEnd: 2015,\r\n    _drawLayer: function(img, ctx, z) {\r\n        var imgData = ctx.getImageData(0, 0, 256, 256),\r\n            data = imgData.data,\r\n            exp = z < 11 ? 0.3 + ((z - 3) / 20) : 1;\r\n            \r\n        for (var i = 0; i < 256; ++i) {\r\n            for (var j = 0; j < 256; ++j) {\r\n                var pixelPos = (j * 256 + i) * 4,\r\n                    yearLoss = 2000 + data[pixelPos + 2],\r\n                    intensity = data[pixelPos],\r\n                    scale = Math.pow(intensity/256, exp) * 256;\r\n\r\n                if (yearLoss >= this._yearBegin && yearLoss < this._yearEnd) {\r\n                    data[pixelPos] = 220;\r\n                    data[pixelPos + 1] = (72 - z) + 102 - (3 * scale / z);\r\n                    data[pixelPos + 2] = (33 - z) + 153 - ((intensity) / z);\r\n                    data[pixelPos + 3] = z < 13 ? scale : intensity;\r\n                } else {\r\n                    data[pixelPos + 3] = 0;\r\n                }\r\n            }\r\n        }\r\n        \r\n        ctx.putImageData(imgData, 0, 0);\r\n    },\r\n    drawTile: function(canvas, tilePoint, zoom) {\r\n        var img = new Image();\r\n        img.crossOrigin = \"Anonymous\";\r\n        img.onload = function() {\r\n            var ctx = canvas.getContext('2d');\r\n            ctx.drawImage(img, 0, 0, 256, 256);\r\n            this._drawLayer(img, ctx, zoom);\r\n            this.tileDrawn(canvas);\r\n        }.bind(this);\r\n        \r\n        img.src = 'http://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_25/' + zoom + '/' + tilePoint.x + '/' + tilePoint.y + '.png';\r\n    },\r\n    setYearInterval: function(yearBegin, yearEnd) {\r\n        this._yearBegin = yearBegin;\r\n        this._yearEnd = yearEnd;\r\n        this.redraw();\r\n    }\r\n});\r\n\r\n//Helper layer with integrated slider control\r\nL.GFWLayerWithSlider = L.Class.extend({\r\n    initialize: function() {\r\n        var layer = this._layer = new L.GFWLayer();\r\n        this._slider = new L.GFWSlider({position: 'bottomright'});\r\n        \r\n        this._slider.on('yearschange', function(data) {\r\n            layer.setYearInterval(data.yearBegin, data.yearEnd);\r\n        })\r\n    },\r\n    \r\n    onAdd: function(map) {\r\n        map.addLayer(this._layer);\r\n        map.addControl(this._slider);\r\n    },\r\n    \r\n    onRemove: function(map) {\r\n        map.removeLayer(this._layer);\r\n        map.removeControl(this._slider);\r\n    },\r\n    \r\n    setZIndex: function() {\r\n        return this._layer.setZIndex.apply(this._layer, arguments);\r\n    },\r\n    \r\n    getSlider: function() {\r\n        return this._slider;\r\n    },\r\n    \r\n    options: {\r\n        attribution: GFW_ATTRIBUTION\r\n    }\r\n})\r\n\r\n})();\r\n/** Leaflet control for years interval selection\r\n * Requires jQuery and Handlebars\r\n*/\r\nL.GFWSlider = L.Control.extend({\r\n    includes: L.Mixin.Events,\r\n    _yearBegin: 2001,\r\n    _yearEnd: 2015,\r\n    _setYears: function(yearBegin, yearEnd) {\r\n        this._yearBegin = yearBegin;\r\n        this._yearEnd = yearEnd;\r\n        this.fire('yearschange', {yearBegin: this._yearBegin, yearEnd: this._yearEnd});\r\n    },\r\n    onAdd: function(map) {\r\n        var template = Handlebars.compile(\r\n            '<div class = \"gfw-slider\">' + \r\n                '<div class = \"gfw-slider-container\"></div>' +\r\n                '<div class = \"gfw-slider-labels\">' +\r\n                    '{{#labels}}' +\r\n                        '<div class = \"gfw-label-item\">{{.}}</div>' +\r\n                    '{{/labels}}' +\r\n                '</div>' +\r\n            '</div>'\r\n        );\r\n        \r\n        var labels = [];\r\n        for (var year = 2001; year <= 2014; year++) {\r\n            labels.push(year);\r\n        }\r\n        \r\n        var ui = this._ui = $(template({\r\n            labels: labels\r\n        }));\r\n        \r\n        ui.find('.gfw-slider-container').slider({\r\n            min: 2001,\r\n            max: 2015,\r\n            values: [this._yearBegin, this._yearEnd],\r\n            range: true,\r\n            change: function(event, ui) {\r\n                this._setYears(ui.values[0], ui.values[1]);\r\n            }.bind(this)\r\n        });\r\n\t\tvar dragging = map.dragging;\r\n\t\tL.DomEvent\r\n\t\t\t.on(ui[0], 'mouseover', dragging.disable, dragging)\r\n\t\t\t.on(ui[0], 'mouseout', dragging.enable, dragging);\r\n        \r\n        // ui.on('mousedown', function(event) {\r\n            // event.stopPropagation();\r\n        // });\r\n        \r\n        return ui[0];\r\n    },\r\n    \r\n    onRemove: function() {\r\n    },\r\n    \r\n    saveState: function() {\r\n        return {\r\n            version: '1.0.0',\r\n            yearBegin: this._yearBegin,\r\n            yearEnd: this._yearEnd\r\n        }\r\n    },\r\n    \r\n    loadState: function(data) {\r\n        if (this._ui) {\r\n            this._ui.find('.gfw-slider-container').slider('option', 'values', [data.yearBegin, data.yearEnd]);\r\n        } else {\r\n            this._setYears(data.yearBegin, data.yearEnd);\r\n        }\r\n    }\r\n});\r\n/** GeoMixer virtual layer\r\n*/\r\n(function (){\r\n\r\nvar defineClass = function() {\r\n    var GeoMixerGFWLayer = L.GFWLayerWithSlider.extend({\r\n        initFromDescription: function(layerDescription) {\r\n            this._gmxProperties = layerDescription.properties;\r\n            return this;\r\n        },\r\n        getGmxProperties: function() {\r\n            return this._gmxProperties;\r\n        }\r\n    });\r\n    L.gmx.addLayerClass('GFW', GeoMixerGFWLayer);\r\n    return GeoMixerGFWLayer;\r\n}\r\n\r\n\r\nif (window.gmxCore) {\r\n    gmxCore.addModule('GFWVirtualLayer', function() {\r\n        return {\r\n            layerClass: defineClass()\r\n        }\r\n    }, {\r\n        init: function(module, path) {\r\n            if (!L.GFWLayerWithSlider) {\r\n                gmxCore.loadCSS(path + 'L.GFWSlider.css');\r\n                return $.when(\r\n                    gmxCore.loadScript(path + 'L.GFWLayer.js'),\r\n                    gmxCore.loadScript(path + 'L.GFWSlider.js')\r\n                );\r\n            }\r\n        }\r\n        \r\n    });\r\n} else {\r\n    defineClass();\r\n}\r\n \r\n})();\r\n/** GeoMixer plugin\r\n*/\r\n(function (){\r\nif (!window.gmxCore) {\r\n    return\r\n}\r\n\r\nvar publicInterface = {\r\n    pluginName: 'GFW Plugin'\r\n}\r\n\r\ngmxCore.addModule('GFWPlugin', publicInterface, {\r\n    init: function(module, path) {\r\n        return gmxCore.loadModule('GFWVirtualLayer', path + 'GmxGFWLayer.js');\r\n    }\r\n});\r\n\r\n})();\r\n\n\n\n// WEBPACK FOOTER //\n// ./external/GMXPluginGFW/dist/gmxPluginGfw.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./external/GMXPluginGFW/dist/gmxPluginGfw.css\n// module id = 4\n// module chunks = 0","(function() {\r\n    var s2 = function(num) { return num < 10 ? '0' + num : num; },\r\n        gibsAttribution = '<a href=\"https://earthdata.nasa.gov/gibs\">NASA EOSDIS GIBS</a>';\r\n    \r\n    var getGibsURL = function(info, date, x, y, z) {\r\n        if (info.date && !date) {\r\n            return L.Util.emptyImageUrl;\r\n        }\r\n        \r\n        var dateStr = info.date ? date.getUTCFullYear() + '-' + s2(date.getUTCMonth() + 1) + '-' + s2(date.getUTCDate()) : \"0\";\r\n        \r\n        return L.Util.template(info.template, {\r\n            Time: dateStr,\r\n            TileMatrixSet: 'GoogleMapsCompatible_Level' + info.zoom,\r\n            TileMatrix: z,\r\n            TileRow: y,\r\n            TileCol: x\r\n        });\r\n    };\r\n    \r\n    var GIBSLayerImage = L.TileLayer.extend({\r\n        initialize: function(gibsID, options) {\r\n            this._layerInfo = L.GIBS_LAYERS[gibsID];\r\n            options = options || {};\r\n            options.maxZoom = this._layerInfo.zoom;\r\n            options.attribution = gibsAttribution;\r\n            this._date = options.date || null;\r\n            \r\n            L.Util.setOptions(this, options);\r\n            \r\n            L.TileLayer.prototype.initialize.call(this, this._layerInfo.template, options);\r\n        },\r\n        \r\n        getTileUrl: function(tilePoint){\r\n            return getGibsURL(this._layerInfo, this._date, tilePoint.x, tilePoint.y, tilePoint.z);\r\n        },\r\n        \r\n        setDate: function(newDate) {\r\n            if (this._layerInfo.date) {\r\n                this._date = newDate;\r\n                this._map && this.redraw();\r\n            }\r\n            return this;\r\n        },\r\n        \r\n        isTemporal: function() {\r\n            return this._layerInfo.date;\r\n        }\r\n        \r\n        //setTransparent: function(isTransparent) { return this; } //to ensure the same methods for both classes\r\n    });\r\n\r\n    var GIBSLayerCanvas = L.TileLayer.Canvas.extend({\r\n        initialize: function(layerName, options) {\r\n        \r\n            L.Util.setOptions(this, {\r\n                async: true,\r\n                attribution: gibsAttribution\r\n            });\r\n            L.Util.setOptions(this, options);\r\n            \r\n            this._date = this.options.date || null;\r\n            this._layerInfo = L.GIBS_LAYERS[layerName];\r\n            \r\n            if (!this._layerInfo) {\r\n                throw \"Unknown GIBS layer name\";\r\n            }\r\n            \r\n            L.Util.setOptions(this, {maxZoom: this._layerInfo.zoom});\r\n            \r\n            this._maskInfo = null;\r\n            if (layerName.indexOf('Terra') !== -1) {\r\n                this._maskInfo = L.GIBS_MASKS['MODIS_Terra_Data_No_Data'];\r\n            } else if (layerName.indexOf('Aqua') !== -1) {\r\n                this._maskInfo = L.GIBS_MASKS['MODIS_Aqua_Data_No_Data'];\r\n            }\r\n        },\r\n        \r\n        setDate: function(newDate) {\r\n            if (this._layerInfo.date) {\r\n                this._date = newDate;\r\n                this._map && this.redraw();\r\n            }\r\n            return this;\r\n        },\r\n        \r\n        setTransparent: function(isTransparent) {\r\n            this.options.transparent = isTransparent;\r\n            this._map && this.redraw();\r\n            return this;\r\n        },\r\n        \r\n        _loadImage: function(url, onLoaded, onError) {\r\n            var img = new Image();\r\n            img.onload = onLoaded.bind(null, img);\r\n            img.onerror = onError;\r\n            img.crossOrigin = \"anonymous\";\r\n            img.src = url;\r\n        },\r\n                \r\n        drawTile: function(canvas, tilePoint, zoom) {\r\n            var hasMask = this._maskInfo && this.options.transparent,\r\n                mainImg,\r\n                maskImg,\r\n                _this = this;\r\n            \r\n            if (!this._date) {\r\n                return;\r\n            }\r\n            \r\n            \r\n            var tryToProcess = function() {\r\n                if (mainImg && (maskImg || !hasMask)) {\r\n                    if (mainImg.width !== 256 || (hasMask && maskImg.width !== 256)) {\r\n                        _this.tileDrawn(canvas);\r\n                        return;\r\n                    }\r\n                    \r\n                    var mainCtx = canvas.getContext('2d');\r\n                    mainCtx.drawImage(mainImg, 0, 0);\r\n                    \r\n                    if (hasMask) {\r\n                        var mainData = mainCtx.getImageData(0, 0, 256, 256);\r\n                        \r\n                        var maskCanvas = document.createElement('canvas');\r\n                        maskCanvas.width = maskCanvas.height = 256;\r\n                        \r\n                        var maskCtx = maskCanvas.getContext('2d');\r\n                        maskCtx.drawImage(maskImg, 0, 0);\r\n                        \r\n                        var maskPixels = maskCtx.getImageData(0, 0, 256, 256).data,\r\n                            pixels = mainData.data;\r\n                        for (var p = 0; p < maskPixels.length; p += 4) {\r\n                            if (maskPixels[p+3]) {\r\n                                pixels[p+3] = 0;\r\n                            }\r\n                        }\r\n                        \r\n                        mainCtx.putImageData(mainData, 0, 0);\r\n                    }\r\n                    \r\n                    _this.tileDrawn(canvas);\r\n                }\r\n            }\r\n            \r\n            this._adjustTilePoint(tilePoint);\r\n            \r\n            var mainSrc = getGibsURL(this._layerInfo, this._date, tilePoint.x, tilePoint.y, zoom);\r\n            \r\n            this._loadImage(mainSrc, function(img) {\r\n                mainImg = img;\r\n                tryToProcess();\r\n            }, this.tileDrawn.bind(this, canvas));\r\n            \r\n            if (hasMask) {\r\n                var maskSrc = getGibsURL(this._maskInfo, this._date, tilePoint.x, tilePoint.y, zoom);\r\n                this._loadImage(maskSrc, function(img) {\r\n                    maskImg = img;\r\n                    tryToProcess();\r\n                }, this.tileDrawn.bind(this, canvas));\r\n            }\r\n        },\r\n        \r\n        isTemporal: function() {\r\n            return this._layerInfo.date;\r\n        }\r\n    })\r\n    \r\n    L.GIBSLayer = function(gibsID, options) {\r\n        var layerInfo = L.GIBS_LAYERS[gibsID];\r\n            \r\n        if (!layerInfo) {\r\n            throw \"Unknown GIBS layer name\";\r\n        }\r\n        \r\n        options = options || {};\r\n        var needMask = layerInfo.date && 'transparent' in options && /jpg$/.test(layerInfo.template) && \r\n                (gibsID.indexOf('Terra') !== -1 || gibsID.indexOf('Aqua') !== -1);\r\n                \r\n        return needMask ? new GIBSLayerCanvas(gibsID, options) : new GIBSLayerImage(gibsID, options);\r\n    }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./external/leaflet-GIBS/src/GIBSLayer.js","L.GIBS_LAYERS = {\"AMSR2_Snow_Water_Equivalent\":{\"title\":\"AMSR2_Snow_Water_Equivalent\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Snow_Water_Equivalent/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Cloud_Liquid_Water_Day\":{\"title\":\"AMSR2_Cloud_Liquid_Water_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Cloud_Liquid_Water_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Cloud_Liquid_Water_Night\":{\"title\":\"AMSR2_Cloud_Liquid_Water_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Cloud_Liquid_Water_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Surface_Precipitation_Rate_Day\":{\"title\":\"AMSR2_Surface_Precipitation_Rate_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Surface_Precipitation_Rate_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Surface_Precipitation_Rate_Night\":{\"title\":\"AMSR2_Surface_Precipitation_Rate_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Surface_Precipitation_Rate_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Surface_Rain_Rate_Day\":{\"title\":\"AMSR2_Surface_Rain_Rate_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Surface_Rain_Rate_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Surface_Rain_Rate_Night\":{\"title\":\"AMSR2_Surface_Rain_Rate_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Surface_Rain_Rate_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Wind_Speed_Day\":{\"title\":\"AMSR2_Wind_Speed_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Wind_Speed_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Wind_Speed_Night\":{\"title\":\"AMSR2_Wind_Speed_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Wind_Speed_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Columnar_Water_Vapor_Day\":{\"title\":\"AMSR2_Columnar_Water_Vapor_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Columnar_Water_Vapor_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSR2_Columnar_Water_Vapor_Night\":{\"title\":\"AMSR2_Columnar_Water_Vapor_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSR2_Columnar_Water_Vapor_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Brightness_Temp_89H_Day\":{\"title\":\"AMSRE_Brightness_Temp_89H_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Brightness_Temp_89H_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Brightness_Temp_89H_Night\":{\"title\":\"AMSRE_Brightness_Temp_89H_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Brightness_Temp_89H_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Brightness_Temp_89V_Day\":{\"title\":\"AMSRE_Brightness_Temp_89V_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Brightness_Temp_89V_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Brightness_Temp_89V_Night\":{\"title\":\"AMSRE_Brightness_Temp_89V_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Brightness_Temp_89V_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Sea_Ice_Concentration_12km\":{\"title\":\"AMSRE_Sea_Ice_Concentration_12km\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Sea_Ice_Concentration_12km/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Snow_Depth_Over_Ice\":{\"title\":\"AMSRE_Snow_Depth_Over_Ice\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Snow_Depth_Over_Ice/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Sea_Ice_Concentration_25km\":{\"title\":\"AMSRE_Sea_Ice_Concentration_25km\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Sea_Ice_Concentration_25km/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Sea_Ice_Brightness_Temp_89H\":{\"title\":\"AMSRE_Sea_Ice_Brightness_Temp_89H\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Sea_Ice_Brightness_Temp_89H/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AMSRE_Sea_Ice_Brightness_Temp_89V\":{\"title\":\"AMSRE_Sea_Ice_Brightness_Temp_89V\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AMSRE_Sea_Ice_Brightness_Temp_89V/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_CO_Total_Column_Day\":{\"title\":\"AIRS_CO_Total_Column_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_CO_Total_Column_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_CO_Total_Column_Night\":{\"title\":\"AIRS_CO_Total_Column_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_CO_Total_Column_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_Dust_Score\":{\"title\":\"AIRS_Dust_Score\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_Dust_Score/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_Prata_SO2_Index_Day\":{\"title\":\"AIRS_Prata_SO2_Index_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_Prata_SO2_Index_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_Prata_SO2_Index_Night\":{\"title\":\"AIRS_Prata_SO2_Index_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_Prata_SO2_Index_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_Precipitation_Day\":{\"title\":\"AIRS_Precipitation_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_Precipitation_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"AIRS_Precipitation_Night\":{\"title\":\"AIRS_Precipitation_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/AIRS_Precipitation_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"BlueMarble_NextGeneration\":{\"title\":\"BlueMarble_NextGeneration\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/BlueMarble_NextGeneration/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":false},\"BlueMarble_ShadedRelief_Bathymetry\":{\"title\":\"BlueMarble_ShadedRelief_Bathymetry\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/BlueMarble_ShadedRelief_Bathymetry/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":false},\"BlueMarble_ShadedRelief\":{\"title\":\"BlueMarble_ShadedRelief\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/BlueMarble_ShadedRelief/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":false},\"Coastlines\":{\"title\":\"Coastlines\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/Coastlines/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":9,\"date\":false},\"GMI_Rain_Rate_Asc\":{\"title\":\"GMI_Rain_Rate_Asc\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/GMI_Rain_Rate_Asc/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"GMI_Rain_Rate_Dsc\":{\"title\":\"GMI_Rain_Rate_Dsc\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/GMI_Rain_Rate_Dsc/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"GMI_Brightness_Temp_Asc\":{\"title\":\"GMI_Brightness_Temp_Asc\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/GMI_Brightness_Temp_Asc/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"GMI_Brightness_Temp_Dsc\":{\"title\":\"GMI_Brightness_Temp_Dsc\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/GMI_Brightness_Temp_Dsc/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"GMI_Snow_Rate_Asc\":{\"title\":\"GMI_Snow_Rate_Asc\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/GMI_Snow_Rate_Asc/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"GMI_Snow_Rate_Dsc\":{\"title\":\"GMI_Snow_Rate_Dsc\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/GMI_Snow_Rate_Dsc/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Combined_Value_Added_AOD\":{\"title\":\"MODIS_Combined_Value_Added_AOD\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Combined_Value_Added_AOD/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MEaSUREs_Daily_Landscape_Freeze_Thaw_AMSRE\":{\"title\":\"MEaSUREs_Daily_Landscape_Freeze_Thaw_AMSRE\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MEaSUREs_Daily_Landscape_Freeze_Thaw_AMSRE/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MEaSUREs_Daily_Landscape_Freeze_Thaw_SSMI\":{\"title\":\"MEaSUREs_Daily_Landscape_Freeze_Thaw_SSMI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MEaSUREs_Daily_Landscape_Freeze_Thaw_SSMI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_CO_215hPa_Day\":{\"title\":\"MLS_CO_215hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_CO_215hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_CO_215hPa_Night\":{\"title\":\"MLS_CO_215hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_CO_215hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_H2O_46hPa_Day\":{\"title\":\"MLS_H2O_46hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_H2O_46hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_H2O_46hPa_Night\":{\"title\":\"MLS_H2O_46hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_H2O_46hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_HNO3_46hPa_Day\":{\"title\":\"MLS_HNO3_46hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_HNO3_46hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_HNO3_46hPa_Night\":{\"title\":\"MLS_HNO3_46hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_HNO3_46hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_N2O_46hPa_Day\":{\"title\":\"MLS_N2O_46hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_N2O_46hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_N2O_46hPa_Night\":{\"title\":\"MLS_N2O_46hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_N2O_46hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_O3_46hPa_Day\":{\"title\":\"MLS_O3_46hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_O3_46hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_O3_46hPa_Night\":{\"title\":\"MLS_O3_46hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_O3_46hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_SO2_147hPa_Day\":{\"title\":\"MLS_SO2_147hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_SO2_147hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_SO2_147hPa_Night\":{\"title\":\"MLS_SO2_147hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_SO2_147hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_Temperature_46hPa_Day\":{\"title\":\"MLS_Temperature_46hPa_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_Temperature_46hPa_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MLS_Temperature_46hPa_Night\":{\"title\":\"MLS_Temperature_46hPa_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MLS_Temperature_46hPa_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Chlorophyll_A\":{\"title\":\"MODIS_Terra_Chlorophyll_A\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Chlorophyll_A/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Water_Mask\":{\"title\":\"MODIS_Water_Mask\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Water_Mask/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":9,\"date\":false},\"MODIS_Terra_Snow_Cover\":{\"title\":\"MODIS_Terra_Snow_Cover\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Snow_Cover/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":8,\"date\":true},\"MODIS_Terra_Land_Surface_Temp_Day\":{\"title\":\"MODIS_Terra_Land_Surface_Temp_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Land_Surface_Temp_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Terra_Land_Surface_Temp_Night\":{\"title\":\"MODIS_Terra_Land_Surface_Temp_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Land_Surface_Temp_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Terra_Sea_Ice\":{\"title\":\"MODIS_Terra_Sea_Ice\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Sea_Ice/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Terra_Brightness_Temp_Band31_Day\":{\"title\":\"MODIS_Terra_Brightness_Temp_Band31_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Brightness_Temp_Band31_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Terra_Brightness_Temp_Band31_Night\":{\"title\":\"MODIS_Terra_Brightness_Temp_Band31_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Brightness_Temp_Band31_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Terra_Aerosol\":{\"title\":\"MODIS_Terra_Aerosol\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Aerosol/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Water_Vapor_5km_Day\":{\"title\":\"MODIS_Terra_Water_Vapor_5km_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Water_Vapor_5km_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Water_Vapor_5km_Night\":{\"title\":\"MODIS_Terra_Water_Vapor_5km_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Water_Vapor_5km_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Cloud_Top_Pressure_Day\":{\"title\":\"MODIS_Terra_Cloud_Top_Pressure_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Cloud_Top_Pressure_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Cloud_Top_Pressure_Night\":{\"title\":\"MODIS_Terra_Cloud_Top_Pressure_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Cloud_Top_Pressure_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Cloud_Top_Temp_Day\":{\"title\":\"MODIS_Terra_Cloud_Top_Temp_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Cloud_Top_Temp_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_Cloud_Top_Temp_Night\":{\"title\":\"MODIS_Terra_Cloud_Top_Temp_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Cloud_Top_Temp_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Terra_SurfaceReflectance_Bands121\":{\"title\":\"MODIS_Terra_SurfaceReflectance_Bands121\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_SurfaceReflectance_Bands121/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"MODIS_Terra_SurfaceReflectance_Bands143\":{\"title\":\"MODIS_Terra_SurfaceReflectance_Bands143\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_SurfaceReflectance_Bands143/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":true},\"MODIS_Terra_SurfaceReflectance_Bands721\":{\"title\":\"MODIS_Terra_SurfaceReflectance_Bands721\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_SurfaceReflectance_Bands721/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":true},\"MODIS_Terra_CorrectedReflectance_TrueColor\":{\"title\":\"MODIS_Terra_CorrectedReflectance_TrueColor\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_CorrectedReflectance_TrueColor/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"MODIS_Terra_CorrectedReflectance_Bands367\":{\"title\":\"MODIS_Terra_CorrectedReflectance_Bands367\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_CorrectedReflectance_Bands367/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"MODIS_Terra_CorrectedReflectance_Bands721\":{\"title\":\"MODIS_Terra_CorrectedReflectance_Bands721\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_CorrectedReflectance_Bands721/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"MODIS_Aqua_Chlorophyll_A\":{\"title\":\"MODIS_Aqua_Chlorophyll_A\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Chlorophyll_A/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Aqua_Snow_Cover\":{\"title\":\"MODIS_Aqua_Snow_Cover\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Snow_Cover/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":8,\"date\":true},\"MODIS_Aqua_Land_Surface_Temp_Day\":{\"title\":\"MODIS_Aqua_Land_Surface_Temp_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Land_Surface_Temp_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Aqua_Land_Surface_Temp_Night\":{\"title\":\"MODIS_Aqua_Land_Surface_Temp_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Land_Surface_Temp_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Aqua_Sea_Ice\":{\"title\":\"MODIS_Aqua_Sea_Ice\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Sea_Ice/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Aqua_Brightness_Temp_Band31_Day\":{\"title\":\"MODIS_Aqua_Brightness_Temp_Band31_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Brightness_Temp_Band31_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Aqua_Brightness_Temp_Band31_Night\":{\"title\":\"MODIS_Aqua_Brightness_Temp_Band31_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Brightness_Temp_Band31_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"MODIS_Aqua_Aerosol\":{\"title\":\"MODIS_Aqua_Aerosol\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Aerosol/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_Water_Vapor_5km_Day\":{\"title\":\"MODIS_Aqua_Water_Vapor_5km_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Water_Vapor_5km_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_Water_Vapor_5km_Night\":{\"title\":\"MODIS_Aqua_Water_Vapor_5km_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Water_Vapor_5km_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_Cloud_Top_Pressure_Day\":{\"title\":\"MODIS_Aqua_Cloud_Top_Pressure_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Cloud_Top_Pressure_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_Cloud_Top_Pressure_Night\":{\"title\":\"MODIS_Aqua_Cloud_Top_Pressure_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Cloud_Top_Pressure_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_Cloud_Top_Temp_Day\":{\"title\":\"MODIS_Aqua_Cloud_Top_Temp_Day\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Cloud_Top_Temp_Day/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_Cloud_Top_Temp_Night\":{\"title\":\"MODIS_Aqua_Cloud_Top_Temp_Night\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Cloud_Top_Temp_Night/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"MODIS_Aqua_SurfaceReflectance_Bands121\":{\"title\":\"MODIS_Aqua_SurfaceReflectance_Bands121\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_SurfaceReflectance_Bands121/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"MODIS_Aqua_SurfaceReflectance_Bands143\":{\"title\":\"MODIS_Aqua_SurfaceReflectance_Bands143\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_SurfaceReflectance_Bands143/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":true},\"MODIS_Aqua_SurfaceReflectance_Bands721\":{\"title\":\"MODIS_Aqua_SurfaceReflectance_Bands721\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_SurfaceReflectance_Bands721/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":true},\"MODIS_Aqua_CorrectedReflectance_TrueColor\":{\"title\":\"MODIS_Aqua_CorrectedReflectance_TrueColor\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_CorrectedReflectance_TrueColor/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"MODIS_Aqua_CorrectedReflectance_Bands721\":{\"title\":\"MODIS_Aqua_CorrectedReflectance_Bands721\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_CorrectedReflectance_Bands721/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"OMI_Absorbing_Aerosol_Optical_Depth\":{\"title\":\"OMI_Absorbing_Aerosol_Optical_Depth\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_Absorbing_Aerosol_Optical_Depth/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"OMI_Aerosol_Index\":{\"title\":\"OMI_Aerosol_Index\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_Aerosol_Index/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"OMI_Aerosol_Optical_Depth\":{\"title\":\"OMI_Aerosol_Optical_Depth\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_Aerosol_Optical_Depth/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"OMI_Cloud_Pressure\":{\"title\":\"OMI_Cloud_Pressure\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_Cloud_Pressure/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"OMI_SO2_Upper_Troposphere_and_Stratosphere\":{\"title\":\"OMI_SO2_Upper_Troposphere_and_Stratosphere\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_SO2_Upper_Troposphere_and_Stratosphere/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"OMI_SO2_Lower_Troposphere\":{\"title\":\"OMI_SO2_Lower_Troposphere\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_SO2_Lower_Troposphere/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"OMI_SO2_Middle_Troposphere\":{\"title\":\"OMI_SO2_Middle_Troposphere\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/OMI_SO2_Middle_Troposphere/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"Sea_Surface_Temp_Blended\":{\"title\":\"Sea_Surface_Temp_Blended\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/Sea_Surface_Temp_Blended/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":7,\"date\":true},\"Sea_Surface_Temp_Infrared\":{\"title\":\"Sea_Surface_Temp_Infrared\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/Sea_Surface_Temp_Infrared/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":8,\"date\":true},\"Sea_Surface_Temp_Microwave\":{\"title\":\"Sea_Surface_Temp_Microwave\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/Sea_Surface_Temp_Microwave/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":3,\"date\":true},\"Reference_Features\":{\"title\":\"Reference_Features\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/Reference_Features/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":9,\"date\":false},\"Reference_Labels\":{\"title\":\"Reference_Labels\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/Reference_Labels/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":9,\"date\":false},\"SMAP_L1_Passive_Faraday_Rotation_Aft\":{\"title\":\"SMAP_L1_Passive_Faraday_Rotation_Aft\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Faraday_Rotation_Aft/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Faraday_Rotation_Fore\":{\"title\":\"SMAP_L1_Passive_Faraday_Rotation_Fore\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Faraday_Rotation_Fore/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Aft_H\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Aft_H\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Aft_H/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Aft_H_QA\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Aft_H_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Aft_H_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Aft_H_RFI\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Aft_H_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Aft_H_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Fore_H\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Fore_H\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Fore_H/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Fore_H_QA\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Fore_H_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Fore_H_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Fore_H_RFI\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Fore_H_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Fore_H_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Aft_V\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Aft_V\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Aft_V/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Aft_V_QA\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Aft_V_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Aft_V_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Aft_V_RFI\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Aft_V_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Aft_V_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Fore_V\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Fore_V\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Fore_V/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Fore_V_QA\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Fore_V_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Fore_V_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L1_Passive_Brightness_Temp_Fore_V_RFI\":{\"title\":\"SMAP_L1_Passive_Brightness_Temp_Fore_V_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L1_Passive_Brightness_Temp_Fore_V_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L2_Passive_Soil_Moisture_Option1\":{\"title\":\"SMAP_L2_Passive_Soil_Moisture_Option1\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L2_Passive_Soil_Moisture_Option1/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L2_Passive_Soil_Moisture_Option2\":{\"title\":\"SMAP_L2_Passive_Soil_Moisture_Option2\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L2_Passive_Soil_Moisture_Option2/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L2_Passive_Soil_Moisture_Option3\":{\"title\":\"SMAP_L2_Passive_Soil_Moisture_Option3\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L2_Passive_Soil_Moisture_Option3/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_HH\":{\"title\":\"SMAP_L3_Active_Sigma0_HH\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_HH/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_HH_QA\":{\"title\":\"SMAP_L3_Active_Sigma0_HH_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_HH_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_HH_RFI\":{\"title\":\"SMAP_L3_Active_Sigma0_HH_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_HH_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_VV\":{\"title\":\"SMAP_L3_Active_Sigma0_VV\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_VV/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_VV_QA\":{\"title\":\"SMAP_L3_Active_Sigma0_VV_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_VV_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_VV_RFI\":{\"title\":\"SMAP_L3_Active_Sigma0_VV_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_VV_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_XPOL\":{\"title\":\"SMAP_L3_Active_Sigma0_XPOL\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_XPOL/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_XPOL_QA\":{\"title\":\"SMAP_L3_Active_Sigma0_XPOL_QA\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_XPOL_QA/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Sigma0_XPOL_RFI\":{\"title\":\"SMAP_L3_Active_Sigma0_XPOL_RFI\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Sigma0_XPOL_RFI/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Soil_Moisture\":{\"title\":\"SMAP_L3_Active_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Passive_Soil_Moisture\":{\"title\":\"SMAP_L3_Active_Passive_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Passive_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Passive_Soil_Moisture\":{\"title\":\"SMAP_L3_Passive_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Passive_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Passive_Brightness_Temp_H\":{\"title\":\"SMAP_L3_Active_Passive_Brightness_Temp_H\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Passive_Brightness_Temp_H/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Passive_Brightness_Temp_H\":{\"title\":\"SMAP_L3_Passive_Brightness_Temp_H\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Passive_Brightness_Temp_H/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Active_Passive_Brightness_Temp_V\":{\"title\":\"SMAP_L3_Active_Passive_Brightness_Temp_V\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Active_Passive_Brightness_Temp_V/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L3_Passive_Brightness_Temp_V\":{\"title\":\"SMAP_L3_Passive_Brightness_Temp_V\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L3_Passive_Brightness_Temp_V/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Analyzed_Root_Zone_Soil_Moisture\":{\"title\":\"SMAP_L4_Analyzed_Root_Zone_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Analyzed_Root_Zone_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Analyzed_Surface_Soil_Moisture\":{\"title\":\"SMAP_L4_Analyzed_Surface_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Analyzed_Surface_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Emult_Average\":{\"title\":\"SMAP_L4_Emult_Average\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Emult_Average/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Frozen_Area\":{\"title\":\"SMAP_L4_Frozen_Area\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Frozen_Area/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Mean_Gross_Primary_Productivity\":{\"title\":\"SMAP_L4_Mean_Gross_Primary_Productivity\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Mean_Gross_Primary_Productivity/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Mean_Net_Ecosystem_Exchange\":{\"title\":\"SMAP_L4_Mean_Net_Ecosystem_Exchange\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Mean_Net_Ecosystem_Exchange/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Mean_Heterotrophic_Respiration\":{\"title\":\"SMAP_L4_Mean_Heterotrophic_Respiration\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Mean_Heterotrophic_Respiration/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Snow_Mass\":{\"title\":\"SMAP_L4_Snow_Mass\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Snow_Mass/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Soil_Temperature_Layer_1\":{\"title\":\"SMAP_L4_Soil_Temperature_Layer_1\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Soil_Temperature_Layer_1/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Uncertainty_Analyzed_Root_Zone_Soil_Moisture\":{\"title\":\"SMAP_L4_Uncertainty_Analyzed_Root_Zone_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Uncertainty_Analyzed_Root_Zone_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"SMAP_L4_Uncertainty_Analyzed_Surface_Soil_Moisture\":{\"title\":\"SMAP_L4_Uncertainty_Analyzed_Surface_Soil_Moisture\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/SMAP_L4_Uncertainty_Analyzed_Surface_Soil_Moisture/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":6,\"date\":true},\"VIIRS_CityLights_2012\":{\"title\":\"VIIRS_CityLights_2012\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/VIIRS_CityLights_2012/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":8,\"date\":false},\"VIIRS_SNPP_CorrectedReflectance_TrueColor\":{\"title\":\"VIIRS_SNPP_CorrectedReflectance_TrueColor\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/VIIRS_SNPP_CorrectedReflectance_TrueColor/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"VIIRS_SNPP_CorrectedReflectance_BandsM11-I2-I1\":{\"title\":\"VIIRS_SNPP_CorrectedReflectance_BandsM11-I2-I1\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/VIIRS_SNPP_CorrectedReflectance_BandsM11-I2-I1/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true},\"VIIRS_SNPP_CorrectedReflectance_BandsM3-I3-M11\":{\"title\":\"VIIRS_SNPP_CorrectedReflectance_BandsM3-I3-M11\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/VIIRS_SNPP_CorrectedReflectance_BandsM3-I3-M11/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpg\",\"zoom\":9,\"date\":true}};L.GIBS_MASKS = {\"MODIS_Terra_Data_No_Data\":{\"title\":\"MODIS_Terra_Data_No_Data\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_Data_No_Data/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":9,\"date\":true},\"MODIS_Aqua_Data_No_Data\":{\"title\":\"MODIS_Aqua_Data_No_Data\",\"template\":\"http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Aqua_Data_No_Data/default/{Time}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png\",\"zoom\":9,\"date\":true}};\n\n\n// WEBPACK FOOTER //\n// ./external/leaflet-GIBS/src/GIBSMetadata.js","//New layer class for Leaflet-GeoMixer plugin (https://github.com/ScanEx/Leaflet-GeoMixer)\r\n//Meta properties:\r\n//  * gibs-layername Imagery Layer ID from https://wiki.earthdata.nasa.gov/display/GIBS/GIBS+Available+Imagery+Products\r\n//  * gibs-transparent If present, data mask layer will be used to hide black no-data imagery background\r\n(function() {\r\n    \r\nvar GIBSProxyLayer = function() {};\r\n\r\nGIBSProxyLayer.prototype.initFromDescription = function(layerDescription) {\r\n    var props = layerDescription.properties;\r\n    \r\n    if (!props.MetaProperties['gibs-layername']) {\r\n         return new L.gmx.DummyLayer(props);\r\n    }\r\n    \r\n    var layerName = props.MetaProperties['gibs-layername'].Value,\r\n        isTransparent = !!props.MetaProperties['gibs-transparent'];\r\n\r\n    try {\r\n        var layer = new L.GIBSLayer(layerName, {transparent: isTransparent});\r\n    } catch(e) {\r\n        return new L.gmx.DummyLayer(props);\r\n    }\r\n\r\n    layer.getGmxProperties = function() {\r\n        return props;\r\n    }\r\n\r\n    layer.setDateInterval = function(dateBegin, dateEnd) {\r\n\r\n        //if dateEnd is exactly midnight, we show previous day iff dateBegin is not equal to dateEnd (next day otherwise)\r\n        var shift = 0;\r\n        if (dateEnd.valueOf() % (3600*1000*24) === 0) {\r\n            shift = dateBegin < dateEnd ? 1 : 0;\r\n        }\r\n\r\n        this.setDate(new Date(dateEnd - shift));\r\n        return this;\r\n    }\r\n\r\n    return layer;\r\n}\r\n\r\nif (L.gmx && L.gmx.addLayerClass) {\r\n    L.gmx.addLayerClass('GIBS', GIBSProxyLayer);\r\n}\r\n\r\nwindow.gmxCore && gmxCore.addModule('GIBSVirtualLayer', {layerClass: GIBSProxyLayer}, {\r\n    init: function(module, path) {\r\n        if (!L.GIBSLayer) {\r\n            return $.when(\r\n                gmxCore.loadScript(path + 'GIBSLayer.js'),\r\n                gmxCore.loadScript(path + 'GIBSMetadata.js')\r\n            )\r\n        }\r\n    }\r\n});\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./external/leaflet-GIBS/src/GeoMixerGIBSLayer.js"],"sourceRoot":""}